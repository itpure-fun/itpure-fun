import{a as s}from"./dict-D0jfdQ0W.js";import{k as l,S as p,r as n,o as k,h as C,w as d,f as I,t as R,d as c,M as h}from"./index-CeUf7hzR.js";const T={__name:"dataList",setup(S,{expose:f}){const m=l(),i=l(!1),o=l({id:void 0,name:void 0}),v=async(e,a)=>{const t=await s.changeStatus({id:a,status:e});t.success&&h.success(t.message)},y=async(e,a)=>{const t=await s.numberOperation({id:a,numberName:"sort",numberValue:e});t.success&&h.success(t.message)},_=e=>{o.value=e,m.value.requestData(),i.value=!0},D=p({autoRequest:!1,api:s.getPageList,recycleApi:s.getRecyclePageList,showIndex:!1,pageLayout:"fixed",rowSelection:{showCheckedAll:!0},operationColumn:!0,operationColumnWidth:160,beforeAdd:e=>{var a,t;return e.code=(a=o.value)==null?void 0:a.code,e.type_id=(t=o.value)==null?void 0:t.id,!0},add:{show:!0,api:s.saveDictData,auth:["system:dict:save"]},edit:{show:!0,api:s.updateDictData,auth:["system:dict:update"]},delete:{show:!0,api:s.deletesDictData,auth:["system:dict:delete"],realApi:s.realDeletesDictData,realAuth:["system:dict:realDeletes"]},recovery:{show:!0,api:s.recoverysDictData,auth:["system:dict:recovery"]},beforeRequest:e=>e.type_id=o.value.id}),w=p([{title:"ID",dataIndex:"id",addDisplay:!1,editDisplay:!1,width:50,hide:!0},{title:"字典标签",dataIndex:"label",search:!0,width:220,commonRules:[{required:!0,message:"字典标签必填"}]},{title:"字典键值",dataIndex:"value",search:!0,width:220,commonRules:[{required:!0,message:"字典键值必填"}]},{title:"排序",dataIndex:"sort",formType:"input-number",addDefaultValue:1,width:180,min:0,max:1e3},{title:"状态",dataIndex:"status",search:!0,formType:"radio",dict:{name:"data_status",props:{label:"title",value:"key"}},addDefaultValue:"1",width:180},{title:"备注",dataIndex:"remark",hide:!0,formType:"textarea"},{title:"创建时间",dataIndex:"created_at",addDisplay:!1,editDisplay:!1,search:!0,formType:"range",width:180}]);return f({open:_}),(e,a)=>{const t=n("a-input-number"),g=n("a-switch"),x=n("ma-crud"),b=n("a-modal");return k(),C(b,{visible:i.value,"onUpdate:visible":a[0]||(a[0]=u=>i.value=u),fullscreen:"",footer:!1},{title:d(()=>[I("维护 "+R(o.value.name)+" 字典数据",1)]),default:d(()=>[c(x,{options:D,columns:w,ref_key:"crudRef",ref:m},{sort:d(({record:u})=>[c(t,{"default-value":u.sort,mode:"button",onChange:r=>y(r,u.id),min:0,max:1e3},null,8,["default-value","onChange"])]),status:d(({record:u})=>[c(g,{"checked-value":1,"unchecked-value":"2",onChange:r=>v(r,u.id),"default-checked":u.status==1},null,8,["onChange","default-checked"])]),_:1},8,["options","columns"])]),_:1},8,["visible"])}}};export{T as default};
