import{d as E}from"./doc-QQinN6SY.js";import{Z as M,k as w,c as v,l as d,t as h,d as t,w as e,r as u,o as l,f as o,F as C,g as $,h as _,i as f,m as b,$ as L,X as N,M as I}from"./index-CeUf7hzR.js";import R from"./globalParams-dfJkAf6n.js";import V from"./sliderDrawer-B3Uw31LP.js";import"./simRequest-BsCnwDRk.js";const j={class:"work-area p-5"},O={class:"ma-content-block shadow p-5"},F={class:"text-2xl"},H={class:"mt-2"},U=["innerHTML"],X={class:"ma-content-block shadow p-5 mt-5"},Z=d("div",{class:"mt-5"},null,-1),oe={__name:"interfaceList",setup(J){const c=M(),m=w({}),k=w(),A=w(),q=async()=>{const n=await E.getAppAndInterfaceList(c.appId);m.value=n.data},x=async()=>{const n=b.md5(c.appId+c.appSecret);k.value.saveAuthGlobalParams(c.appId,n,""),await L(`app_id=${c.appId}&identity=${n}`)},z=()=>{let n=Date.now(),s={app_id:c.appId,timestamp:n,app_secret:c.appSecret,sign_ver:"1.0"},p=Object.keys(s).sort((a,g)=>a<g?1:a>g?-1:0),i={};for(let a=0;a<p.length;a++)i[p[a]]=s[p[a]];let y=b.md5(b.httpBuild(i));return{app_id:c.appId,signature:y,timestamp:n}},B=()=>{const n="/api/v1/getAccessToken?"+b.httpBuild(z());N({url:n,method:"post"}).then(async s=>{s.success?(k.value.saveAuthGlobalParams("","",s.data.access_token),await L(`access_token=${s.data.access_token}`)):I.error(s.message)}).catch(s=>{I.error(s)})},G=()=>{c.globalParams&&(c.globalParams={header:{},query:{},body:{}}),I.success("清除成功")};return q(),(n,s)=>{const p=u("a-divider"),i=u("a-button"),y=u("a-space"),a=u("a-tag"),g=u("a-tooltip"),P=u("a-collapse-item"),T=u("a-collapse");return l(),v("div",j,[d("div",O,[d("div",F,h(m.value.app_name),1),d("div",H,[t(p,{orientation:"left"},{default:e(()=>[o("最后更新时间")]),_:1}),d("p",null,h(m.value.updated_at),1),t(p,{orientation:"left"},{default:e(()=>[o("应用介绍")]),_:1}),d("div",{class:"description",innerHTML:m.value.description},null,8,U)])]),d("div",X,[t(y,{class:"mb-5"},{default:e(()=>[t(i,{type:"primary",onClick:s[0]||(s[0]=()=>k.value.open())},{default:e(()=>[o("设置全局参数")]),_:1}),t(i,{type:"primary",status:"danger",onClick:G},{default:e(()=>[o("清除全局参数")]),_:1}),t(i,{type:"primary",status:"warning",onClick:x},{default:e(()=>[o("生成简易模式 Identity")]),_:1}),t(i,{type:"primary",status:"warning",onClick:B},{default:e(()=>[o("生成复杂模式 AccessToken")]),_:1})]),_:1}),t(T,{"default-active-key":["1"],"expand-icon-position":"right"},{default:e(()=>[(l(!0),v(C,null,$(m.value.apiGroup,(S,D)=>(l(),_(P,{header:S.name,key:(D+1).toString()},{default:e(()=>[t(T,{"expand-icon-position":"right"},{default:e(()=>[(l(!0),v(C,null,$(m.value.apis,(r,K)=>(l(),v(C,null,[r.group_id==S.id?(l(),_(P,{key:0,header:r.name},{default:e(()=>[t(y,{size:"large"},{default:e(()=>[t(g,{content:"点击复制"},{default:e(()=>[t(a,{color:"arcoblue",bordered:"",class:"cursor-pointer",size:"large",onClick:Q=>n.$common.copy(`/api/v1/${r.access_name}`)},{default:e(()=>[o(" /api/v1/"+h(r.access_name),1)]),_:2},1032,["onClick"])]),_:2},1024),t(g,{content:"允许请求的方式"},{default:e(()=>[r.request_mode==="A"?(l(),_(a,{key:0,color:"green",size:"large",bordered:""},{default:e(()=>[o("ALL")]),_:1})):f("",!0),r.request_mode==="G"?(l(),_(a,{key:1,color:"cyan",size:"large",bordered:""},{default:e(()=>[o("GET")]),_:1})):f("",!0),r.request_mode==="P"?(l(),_(a,{key:2,color:"pinkpurple",size:"large",bordered:""},{default:e(()=>[o("POST")]),_:1})):f("",!0),r.request_mode==="U"?(l(),_(a,{key:3,color:"red",size:"large",bordered:""},{default:e(()=>[o("PUT")]),_:1})):f("",!0),r.request_mode==="D"?(l(),_(a,{key:4,color:"orangered",size:"large",bordered:""},{default:e(()=>[o("DELETE")]),_:1})):f("",!0)]),_:2},1024),t(i,{type:"primary",onClick:()=>A.value.open(r)},{default:e(()=>[o("测试接口 / 查看详情")]),_:2},1032,["onClick"])]),_:2},1024),Z,d("div",null,[t(p,{orientation:"left"},{default:e(()=>[o("最后更新时间")]),_:1}),d("p",null,h(r.updated_at),1)])]),_:2},1032,["header"])):f("",!0)],64))),256))]),_:2},1024)]),_:2},1032,["header"]))),128))]),_:1})]),t(R,{ref_key:"globalParamsRef",ref:k},null,512),t(V,{ref_key:"sliderRef",ref:A},null,512)])}}};export{oe as default};
