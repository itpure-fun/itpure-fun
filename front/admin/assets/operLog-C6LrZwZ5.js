import{X as x,_ as U,k as u,S as I,r as p,o as m,c as j,d as r,w as d,f as z,l as e,t as o,h as q,fD as L,i as V,ac as C,H as E,I as A}from"./index-CeUf7hzR.js";const D={getPageList(s={}){return x({url:"system/logs/getOperLogPageList",method:"get",params:s})},deletes(s){return x({url:"system/logs/deleteOperLog",method:"delete",data:s})}},a=s=>(E("data-v-97d247a8"),s=s(),A(),s),H={class:"ma-content-block lg:flex justify-between p-4"},J={class:"arco-descriptions arco-descriptions-layout-horizontal arco-descriptions-size-medium arco-descriptions-border"},X={class:"arco-descriptions-body"},$={class:"arco-descriptions-table"},F={class:"arco-descriptions-row"},G=a(()=>e("td",{class:"arco-descriptions-item-label arco-descriptions-item-label-block"},"请求路由",-1)),K={class:"arco-descriptions-item-value arco-descriptions-item-value-block",colspan:"1"},M={class:"arco-descriptions-row"},Q=a(()=>e("td",{class:"arco-descriptions-item-label arco-descriptions-item-label-block"},"操作用户",-1)),W={class:"arco-descriptions-item-value arco-descriptions-item-value-block",colspan:"1"},Y={class:"arco-descriptions-row"},Z=a(()=>e("td",{class:"arco-descriptions-item-label arco-descriptions-item-label-block"},"请求方法",-1)),ee={class:"arco-descriptions-item-value arco-descriptions-item-value-block",colspan:"1"},te={class:"arco-descriptions-row"},se=a(()=>e("td",{class:"arco-descriptions-item-label arco-descriptions-item-label-block"},"响应代码",-1)),oe={class:"arco-descriptions-item-value arco-descriptions-item-value-block",colspan:"1"},ae={class:"arco-descriptions-row"},ce=a(()=>e("td",{class:"arco-descriptions-item-label arco-descriptions-item-label-block"},"业务名称",-1)),ie={class:"arco-descriptions-item-value arco-descriptions-item-value-block",colspan:"1"},le={class:"arco-descriptions-row"},re=a(()=>e("td",{class:"arco-descriptions-item-label arco-descriptions-item-label-block"},"操作时间",-1)),de={class:"arco-descriptions-item-value arco-descriptions-item-value-block",colspan:"1"},ne={class:"arco-descriptions-row"},pe=a(()=>e("td",{class:"arco-descriptions-item-label arco-descriptions-item-label-block"},"用户IP",-1)),_e={class:"arco-descriptions-item-value arco-descriptions-item-value-block",colspan:"1"},ue={class:"arco-descriptions-row"},me=a(()=>e("td",{class:"arco-descriptions-item-label arco-descriptions-item-label-block"},"用户地点",-1)),he={class:"arco-descriptions-item-value arco-descriptions-item-value-block",colspan:"1"},ve={name:"system:operLog"},be=Object.assign(ve,{setup(s){const P=u(),l=u(!1),t=u({request_data:void 0,response_data:void 0}),S=c=>{t.value=c,c.request_data.length>0&&(t.value.request_data=/\\\\/g.test(c.request_data)?t.value.request_data.replace(/,/g,`,
`):C(t.value.request_data)),c.response_data.length>0&&(t.value.response_data=/\\\\/g.test(c.response_data)?t.value.response_data.replace(/,/g,`
`):C(t.value.response_data)),l.value=!0},B=I({api:D.getPageList,showIndex:!1,pageLayout:"fixed",rowSelection:{showCheckedAll:!0},requestParams:{orderBy:"created_at",orderType:"desc"},delete:{show:!0,api:D.deletes,auth:["system:operLog:delete"]}}),N=I([{title:"ID",dataIndex:"id",addDisplay:!1,editDisplay:!1,width:50,hide:!0},{title:"登录用户",dataIndex:"username",search:!0,width:150},{title:"业务名称",dataIndex:"service_name",search:!0,width:150},{title:"路由",dataIndex:"router",width:240},{title:"登录IP",dataIndex:"ip",width:150,search:!0},{title:"登录地点",dataIndex:"ip_location",width:150},{title:"状态码",dataIndex:"response_code",width:120},{title:"操作时间",dataIndex:"created_at",width:180,search:!0,formType:"range"}]);return(c,i)=>{const R=p("ma-crud"),h=p("a-collapse-item"),O=p("a-collapse"),T=p("a-drawer");return m(),j("div",H,[r(R,{options:B,columns:N,onRowClick:S,ref_key:"crudRef",ref:P},null,8,["options","columns"]),r(T,{visible:l.value,"onUpdate:visible":i[2]||(i[2]=n=>l.value=n),width:"600px",footer:!1},{title:d(()=>[z("操作日志详细信息")]),default:d(()=>{var n,v,b,f,g,k,w,y;return[e("div",J,[e("div",X,[e("table",$,[e("tbody",null,[e("tr",F,[G,e("td",K,o((n=t.value)==null?void 0:n.router),1)]),e("tr",M,[Q,e("td",W,o((v=t.value)==null?void 0:v.username),1)]),e("tr",Y,[Z,e("td",ee,o((b=t.value)==null?void 0:b.method),1)]),e("tr",te,[se,e("td",oe,o((f=t.value)==null?void 0:f.response_code),1)]),e("tr",ae,[ce,e("td",ie,o((g=t.value)==null?void 0:g.service_name),1)]),e("tr",le,[re,e("td",de,o((k=t.value)==null?void 0:k.created_at),1)]),e("tr",ne,[pe,e("td",_e,o((w=t.value)==null?void 0:w.ip),1)]),e("tr",ue,[me,e("td",he,o((y=t.value)==null?void 0:y.ip_location),1)])])])])]),r(O,{"default-active-key":["request","response"],"expand-icon-position":"right",class:"mt-3"},{default:d(()=>[r(h,{header:"请求数据",key:"request"},{default:d(()=>[l.value?(m(),q(L,{key:0,modelValue:t.value.request_data,"onUpdate:modelValue":i[0]||(i[0]=_=>t.value.request_data=_),height:150,readonly:""},null,8,["modelValue"])):V("",!0)]),_:1}),r(h,{header:"响应数据",key:"response"},{default:d(()=>[l.value?(m(),q(L,{key:0,modelValue:t.value.response_data,"onUpdate:modelValue":i[1]||(i[1]=_=>t.value.response_data=_),height:150,readonly:""},null,8,["modelValue"])):V("",!0)]),_:1})]),_:1})]}),_:1},8,["visible"])])}}}),ge=U(be,[["__scopeId","data-v-97d247a8"]]);export{ge as default};
