import{Z as N,k as U,S,r,o as $,h as M,w as l,f as v,d as e,l as g,M as A}from"./index-CeUf7hzR.js";const D={class:"pl-2 pr-2"},G={class:"pl-2 pr-2"},H={class:"pl-2 pr-2"},T={__name:"globalParams",setup(K,{expose:q}){const i=N(),_=U("query"),b=U(!1),t=S({header:[],query:[],body:[]}),P=()=>{k(),b.value=!0},y=()=>{t[_.value].push({name:"",value:""})},f=n=>{t[_.value].splice(n,1)},C=n=>{let m={},p={},s={};t.header.map(o=>{m[o.name]=o.value}),t.query.map(o=>{p[o.name]=o.value}),t.body.map(o=>{s[o.name]=o.value}),i.globalParams={header:m,query:p,body:s},A.success("设置成功"),n(!0)},w=(n,m,p)=>{k();let s={},o={},c={};t.header.map(d=>{s[d.name]=d.value}),t.query.map(d=>{o[d.name]=d.value}),t.body.map(d=>{c[d.name]=d.value}),n!==""&&m!==""&&(o.app_id=n,o.identity=m),p!==""&&(o.access_token=p),i.globalParams={header:s,query:o,body:c}},k=()=>{if(i.globalParams){t.query=[],t.body=[],t.header=[];for(let n in i.globalParams.header)t.header.push({name:n,value:i.globalParams.header[n]});for(let n in i.globalParams.query)t.query.push({name:n,value:i.globalParams.query[n]});for(let n in i.globalParams.body)t.body.push({name:n,value:i.globalParams.body[n]})}};return q({open:P,saveAuthGlobalParams:w}),(n,m)=>{const p=r("icon-plus"),s=r("a-button"),o=r("icon-delete"),c=r("a-table-column"),d=r("a-input"),V=r("a-table"),h=r("a-tab-pane"),x=r("a-tabs"),B=r("a-modal");return $(),M(B,{visible:b.value,"onUpdate:visible":m[1]||(m[1]=a=>b.value=a),"on-before-ok":C,width:"700px",draggable:"","align-center":!1,top:"50"},{title:l(()=>[v("设置全局参数")]),default:l(()=>[e(x,{type:"rounded","active-key":_.value,"onUpdate:activeKey":m[0]||(m[0]=a=>_.value=a)},{default:l(()=>[e(h,{key:"query",title:"设置全局Query"},{default:l(()=>[g("div",D,[e(s,{type:"primary",class:"mb-3",onClick:y},{default:l(()=>[e(p),v(" 新增")]),_:1}),e(V,{data:t.query,pagination:!1},{columns:l(()=>[e(c,{title:"#"},{cell:l(({rowIndex:a})=>[e(s,{type:"outline",onClick:u=>f(a)},{icon:l(()=>[e(o)]),_:2},1032,["onClick"])]),_:1}),e(c,{title:"键名",field:"name"},{cell:l(({record:a})=>[e(d,{modelValue:a.name,"onUpdate:modelValue":u=>a.name=u,"allow-clear":"",placeholder:"请输入键名"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(c,{title:"值",field:"value"},{cell:l(({record:a})=>[e(d,{modelValue:a.value,"onUpdate:modelValue":u=>a.value=u,"allow-clear":"",placeholder:"请输入值"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"])])]),_:1}),e(h,{key:"body",title:"设置全局Body"},{default:l(()=>[g("div",G,[e(s,{type:"primary",class:"mb-3",onClick:y},{default:l(()=>[e(p),v(" 新增")]),_:1}),e(V,{data:t.body,pagination:!1},{columns:l(()=>[e(c,{title:"#"},{cell:l(({rowIndex:a})=>[e(s,{type:"outline",onClick:u=>f(a)},{icon:l(()=>[e(o)]),_:2},1032,["onClick"])]),_:1}),e(c,{title:"键名",field:"name"},{cell:l(({record:a})=>[e(d,{modelValue:a.name,"onUpdate:modelValue":u=>a.name=u,"allow-clear":"",placeholder:"请输入键名"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(c,{title:"值",field:"value"},{cell:l(({record:a})=>[e(d,{modelValue:a.value,"onUpdate:modelValue":u=>a.value=u,"allow-clear":"",placeholder:"请输入值"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"])])]),_:1}),e(h,{key:"header",title:"设置全局Header"},{default:l(()=>[g("div",H,[e(s,{type:"primary",class:"mb-3",onClick:y},{default:l(()=>[e(p),v(" 新增")]),_:1}),e(V,{data:t.header,pagination:!1},{columns:l(()=>[e(c,{title:"#"},{cell:l(({rowIndex:a})=>[e(s,{type:"outline",onClick:u=>f(a)},{icon:l(()=>[e(o)]),_:2},1032,["onClick"])]),_:1}),e(c,{title:"键名",field:"name"},{cell:l(({record:a})=>[e(d,{modelValue:a.name,"onUpdate:modelValue":u=>a.name=u,"allow-clear":"",placeholder:"请输入键名"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(c,{title:"值",field:"value"},{cell:l(({record:a})=>[e(d,{modelValue:a.value,"onUpdate:modelValue":u=>a.value=u,"allow-clear":"",placeholder:"请输入值"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"])])]),_:1})]),_:1},8,["active-key"])]),_:1},8,["visible"])}}};export{T as default};
