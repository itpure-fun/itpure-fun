import{d as U}from"./doc-QQinN6SY.js";import{k as _,S as C,r as d,o,h as u,w as e,f as t,t as m,d as a,l as E,c,F as v,g as I,i as N,q as K}from"./index-CeUf7hzR.js";import R from"./simRequest-BsCnwDRk.js";const $={class:"pl-2 pr-2"},j={key:0},z={key:1},O={__name:"sliderDrawer",setup(G,{expose:T}){const f=_(!1),r=_({}),w=_("paramsList"),y=_([]),k=_([]),b=_([]),D=C([{title:"参数名",dataIndex:"name"},{title:"数据类型",dataIndex:"data_type",slotName:"dataType"},{title:"是否必填",dataIndex:"is_required",slotName:"required"},{title:"默认值",dataIndex:"default_value"}]),L=C([{title:"参数名",dataIndex:"name"},{title:"数据类型",dataIndex:"data_type",slotName:"dataType"},{title:"更新时间",dataIndex:"updated_at"}]),B=async p=>{r.value=p,await V();const l=await K.getDict("api_data_type");y.value=l.data,f.value=!0},V=async()=>{const p=await U.getColumnList(r.value.id);k.value=[],b.value=[],p.data.api_column.map(l=>{l.type===1?k.value.push(l):b.value.push(l)})};return T({open:B}),(p,l)=>{const x=d("a-divider"),g=d("a-descriptions-item"),s=d("a-tag"),A=d("a-descriptions"),q=d("a-table"),h=d("a-tab-pane"),F=d("a-tabs"),S=d("a-drawer");return o(),u(S,{visible:f.value,"onUpdate:visible":l[1]||(l[1]=n=>f.value=n),width:"700px",footer:!1},{title:e(()=>[t(m(r.value.name),1)]),default:e(()=>[a(F,{type:"rounded","active-key":w.value,"onUpdate:activeKey":l[0]||(l[0]=n=>w.value=n)},{default:e(()=>[a(h,{key:"paramsList",title:"参数列表"},{default:e(()=>[E("div",$,[a(x,{orientation:"left"},{default:e(()=>[t("接口信息")]),_:1}),a(A,{column:1,bordered:""},{default:e(()=>[a(g,{label:"接口地址"},{default:e(()=>[t("/api/v1/"+m(r.value.access_name),1)]),_:1}),a(g,{label:"认证模式"},{default:e(()=>[r.value.auth_mode===1?(o(),u(s,{key:0,color:"green",bordered:""},{default:e(()=>[t("简易模式")]),_:1})):(o(),u(s,{key:1,color:"red",bordered:""},{default:e(()=>[t("复杂模式")]),_:1}))]),_:1}),a(g,{label:"认证说明"},{default:e(()=>[r.value.auth_mode===1?(o(),c("div",j,[t(" 简易模式下，只需要在接口后面带上 "),a(s,{color:"orangered"},{default:e(()=>[t("app_id")]),_:1}),t(" 和"),a(s,{color:"orangered"},{default:e(()=>[t("identity")]),_:1})])):(o(),c("div",z,[t(" 复杂模式下，先需要获取 "),a(s,{color:"blue"},{default:e(()=>[t("AccessToken")]),_:1}),t("，再以此请求接口 ")]))]),_:1})]),_:1}),a(x,{orientation:"left"},{default:e(()=>[t("请求参数")]),_:1}),a(q,{data:k.value,columns:D},{dataType:e(({record:n})=>[(o(!0),c(v,null,I(y.value,i=>(o(),c(v,{key:i.id},[i.key==n.data_type?(o(),u(s,{key:0,color:"blue"},{default:e(()=>[t(m(i.title),1)]),_:2},1024)):N("",!0)],64))),128))]),required:e(({record:n})=>[n.is_required===2?(o(),u(s,{key:0,color:"red"},{default:e(()=>[t("是")]),_:1})):(o(),u(s,{key:1,color:"green"},{default:e(()=>[t("否")]),_:1}))]),_:1},8,["data","columns"]),a(x,{orientation:"left"},{default:e(()=>[t("响应参数")]),_:1}),a(q,{data:b.value,columns:L},{dataType:e(({record:n})=>[(o(!0),c(v,null,I(y.value,i=>(o(),c(v,{key:i.id},[i.key==n.data_type?(o(),u(s,{key:0,color:"blue"},{default:e(()=>[t(m(i.title),1)]),_:2},1024)):N("",!0)],64))),128))]),_:1},8,["data","columns"])])]),_:1}),a(h,{key:"simRequest",title:"模拟请求"},{default:e(()=>[a(R,{row:r.value},null,8,["row"])]),_:1})]),_:1},8,["active-key"])]),_:1},8,["visible"])}}};export{O as default};
