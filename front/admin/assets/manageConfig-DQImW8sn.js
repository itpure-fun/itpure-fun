import{c as o}from"./config-C9pe7tIA.js";import{i as h}from"./configDefine-CjGFkmcf.js";import{k as s,S as l,r as d,o as v,h as x,w as u,f as w,l as y,d as k}from"./index-CeUf7hzR.js";const b={class:"h-full"},T={__name:"manageConfig",setup(C,{expose:c}){const a=s(!1),i=s(),n=s(),m=e=>{i.value=e,a.value=!0,n.value.requestData()},p=l({pk:"key",autoRequest:!1,api:o.getConfigList,rowSelection:{showCheckedAll:!0,key:"key"},showIndex:!1,operationColumn:!0,operationColumnWidth:160,edit:{show:!0,api:o.update,auth:["setting:config:update"]},delete:{show:!0,api:o.delete,auth:["setting:config:delete"]},beforeRequest:e=>e.group_id=i.value,beforeEdit:e=>(e.config_select_data&&typeof e.config_select_data=="string"&&(e.config_select_data=e.config_select_data.replace(/\r|\n|\s/g,""),e.config_select_data=e.config_select_data.replace(",]","]")),!0),formOption:{width:"700px"}}),f=l([{title:"所属组",dataIndex:"group_id",formType:"select",hide:!0,dict:{url:"setting/configGroup/index",props:{label:"name",value:"id"}},commonRules:[{required:!0,message:"所属组必选"}],width:180},{title:"配置标题",dataIndex:"name",search:!0,commonRules:[{required:!0,message:"配置标题必填"}],width:220},{title:"配置标识",dataIndex:"key",search:!0,commonRules:[{required:!0,message:"配置标识必填"}],disabled:!0,width:180},{title:"配置值",dataIndex:"value",width:200},{title:"排序",dataIndex:"sort",formType:"input-number",width:200,min:0,max:999},{title:"输入组件",dataIndex:"input_type",formType:"select",commonRules:[{required:!0,message:"输入组件必选"}],dict:{data:h},onControl:(e,t)=>{t.getColumnService().get("config_select_data").setAttr("display",["select","radio","checkbox"].includes(e))},width:180},{title:"配置说明",dataIndex:"remark",formType:"input",width:180},{title:"配置选择数据",dataIndex:"config_select_data",formType:"code-editor",height:200,hide:!0,extra:'用于配置下拉、单选、复选的数据，格式例子：[{"label":"数据一", "value":"shuju1"},...]'}]);return c({open:m}),(e,t)=>{const r=d("ma-crud"),_=d("a-modal");return v(),x(_,{fullscreen:"",visible:a.value,"onUpdate:visible":t[0]||(t[0]=g=>a.value=g),footer:!1},{title:u(()=>[w("管理配置")]),default:u(()=>[y("div",b,[k(r,{ref_key:"crudRef",ref:n,options:p,columns:f},null,8,["options","columns"])])]),_:1},8,["visible"])}}};export{T as default};
