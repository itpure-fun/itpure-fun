import{X as a,k as i,S as y,r as c,o as k,h as I,w as m,f as q,t as f,d as v,M as T}from"./index-CeUf7hzR.js";const l={getList(e={}){return a({url:"system/apiColumn/index",method:"get",params:e})},getRecycleList(e={}){return a({url:"system/apiColumn/recycle",method:"get",params:e})},save(e={}){return a({url:"system/apiColumn/save",method:"post",data:e})},read(e){return a({url:"system/apiColumn/read/"+e,method:"post"})},deletes(e){return a({url:"system/apiColumn/delete",method:"delete",data:e})},recoverys(e){return a({url:"system/apiColumn/recovery",method:"put",data:e})},realDeletes(e){return a({url:"system/apiColumn/realDelete",method:"delete",data:e})},update(e,n={}){return a({url:"system/apiColumn/update/"+e,method:"put",data:n})},changeStatus(e={}){return a({url:"system/apiColumn/changeStatus",method:"put",data:e})}},S={__name:"paramsList",setup(e,{expose:n}){const h=i(),p=i(!1),u=i(""),o=i({id:void 0,name:void 0}),_=async(t,s)=>{const r=await l.changeStatus({id:s,status:t});r.success&&T.success(r.message)},x=(t,s)=>{o.value=t,u.value=s,h.value.requestData(),p.value=!0},C=y({autoRequest:!1,api:l.getList,recycleApi:l.getRecycleList,showIndex:!1,pageLayout:"fixed",rowSelection:{showCheckedAll:!0},operationColumn:!0,operationColumnWidth:300,add:{show:!0,api:l.save,auth:["system:api:save"]},edit:{show:!0,api:l.update,auth:["system:api:update"]},delete:{show:!0,api:l.deletes,auth:["system:api:delete"],realApi:l.realDeletes,realAuth:["system:api:realDeletes"]},import:{show:!0,url:"system/apiColumn/import",templateUrl:"system/apiColumn/downloadTemplate"},export:{show:!0,url:"system/apiColumn/export"},recovery:{show:!0,api:l.recoverys,auth:["system:api:recovery"]},formOption:{width:"800px"},beforeAdd:t=>t.api_id=o.value.id,beforeRequest:t=>{t.api_id=o.value.id,t.type=u.value=="request"?1:2}}),g=y([{title:"ID",dataIndex:"id",addDisplay:!1,editDisplay:!1,width:50},{title:"字段名称",dataIndex:"name",search:!0,commonRules:[{required:!0,message:"字段名称必填"}],span:12,labelWidth:"120px"},{title:"数据类型",dataIndex:"data_type",formType:"select",commonRules:[{required:!0,message:"数据类型必选"}],dict:{name:"api_data_type",props:{label:"title",value:"key"},translation:!0},span:12,search:!0},{title:"字段类型",dataIndex:"type",disabled:!0,formType:"radio",dict:{data:[{label:"请求",value:1},{label:"响应",value:2}],translation:!0},addDefaultValue:()=>u.value=="request"?1:2,span:8,labelWidth:"140px"},{title:"状态",dataIndex:"status",search:!0,formType:"radio",dict:{name:"data_status",props:{label:"title",value:"key"}},addDefaultValue:"1",span:8},{title:"必填",dataIndex:"is_required",search:!0,dict:{data:[{label:"是",value:2},{label:"否",value:1}],translation:!0},addDefaultValue:2,formType:"radio",span:8,onControl:(t,s)=>{s.getColumnService().get("default_value").setAttr("display",t!=2)}},{title:"默认值",dataIndex:"default_value",span:24},{title:"字段说明",dataIndex:"description",formType:"editor",hide:!0},{title:"备注",dataIndex:"remark",hide:!0,formType:"textarea"},{title:"创建时间",dataIndex:"created_at",addDisplay:!1,editDisplay:!1,search:!0,formType:"range",width:180}]);return n({open:x}),(t,s)=>{const r=c("a-switch"),w=c("ma-crud"),b=c("a-modal");return k(),I(b,{visible:p.value,"onUpdate:visible":s[0]||(s[0]=d=>p.value=d),fullscreen:"",footer:!1},{title:m(()=>[q(" 维护 "+f(o.value.name)+" 的"+f(u.value=="request"?"请求参数":"响应参数"),1)]),default:m(()=>[v(w,{options:C,columns:g,ref_key:"crudRef",ref:h},{status:m(({record:d})=>[v(r,{"checked-value":1,"unchecked-value":"2",onChange:D=>_(D,d.id),"default-checked":d.status==1},null,8,["onChange","default-checked"])]),_:1},8,["options","columns"])]),_:1},8,["visible"])}}};export{S as default};
