import{d as c}from"./dept-BZkKLEub.js";import{k as l,S as m,r as o,o as k,h as C,w as d,f,d as p}from"./index-Dj8CxrJe.js";const B={__name:"leader",setup(D,{expose:_}){const r=l(!1),n=l(),a=l(),u=l([]),v=e=>{a.value=e.id,r.value=!0,n.value.requestData()},h=async()=>{const e=u.value.map(s=>({user_id:s.id,username:s.username}));(await c.addLeader({id:a.value,users:e})).success&&n.value.refresh()},x=m({autoRequest:!1,api:c.getLeaderList,searchColNumber:3,showIndex:!1,pageLayout:"fixed",rowSelection:{showCheckedAll:!0},operationColumn:!0,operationColumnWidth:160,delete:{show:!0,api:c.delLeader,auth:["system:dept:update"]},beforeRequest:e=>e.dept_id=a.value,beforeDelete:()=>({id:a.value})}),b=m([{title:"ID",dataIndex:"id",addDisplay:!1,editDisplay:!1,width:50,hide:!0},{title:"用户名",dataIndex:"username",search:!0},{title:"用户昵称",dataIndex:"nickname",search:!0},{title:"手机",dataIndex:"phone"},{title:"邮箱",dataIndex:"email"},{title:"状态",dataIndex:"status",width:100,search:!0,formType:"select",dict:{name:"data_status",props:{label:"title",value:"key"},translation:!0,tagColors:{1:"blue",2:"red"}},labelWidth:"86px"},{title:"设置领导时间",dataIndex:"leader_add_time",width:180}]);return _({open:v}),(e,t)=>{const s=o("a-alert"),I=o("ma-user"),w=o("ma-crud"),y=o("a-modal");return k(),C(y,{visible:r.value,"onUpdate:visible":t[1]||(t[1]=i=>r.value=i),fullscreen:"",footer:!1},{title:d(()=>[f("部门领导列表")]),default:d(()=>[p(s,null,{default:d(()=>[f("部门的领导人可以跨部门设置")]),_:1}),p(w,{options:x,columns:b,ref_key:"crudRef",ref:n,class:"mt-3"},{tableBeforeButtons:d(()=>[p(I,{text:"新增领导",onlyId:!1,isEcho:!1,modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=i=>u.value=i),onSuccess:h},null,8,["modelValue"])]),_:1},8,["options","columns"])]),_:1},8,["visible"])}}};export{B as default};
