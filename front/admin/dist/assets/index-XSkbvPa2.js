var In=Object.defineProperty;var An=(o,e,n)=>e in o?In(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n;var Se=(o,e,n)=>An(o,typeof e!="symbol"?e+"":e,n);import{u as ne,a as Oe,b as ye,r as m,o as v,c as R,d as c,w as u,e as k,f as O,t as x,F as J,g as be,h as D,i as G,_ as Le,j as un,k as P,l as C,m as Ye,v as Xt,n as Ie,p as Mn,q as Pn,M as dn,s as st,x as ce,y as He,z as Nn,A as ve,B as Qt,C as te,D as Re,E as $e,G as Zt,H as Ln,I as Rn,J as qe,K as De,L as Yt,N as Ge,O as Ke,P as Fn,T as fn,Q as Vn,R as pn,S as Vt,U as Wn}from"./index-Dj8CxrJe.js";import{q as zn}from"./queueMessage-CQFXduSm.js";import{u as Bn}from"./user-DRREdc4L.js";const Hn={class:"ml-2 mt-3.5 hidden lg:block"},hn={__name:"ma-breadcrumb",setup(o){const e=ne(),n=Oe(),t=ye();return(a,l)=>{const s=m("a-breadcrumb-item"),r=m("a-breadcrumb");return v(),R("div",Hn,[c(r,null,{default:u(()=>[c(s,{class:"cursor-pointer",onClick:l[0]||(l[0]=i=>k(t).push("/dashboard"))},{default:u(()=>[O(x(a.$t("menus.dashboard")),1)]),_:1}),(v(!0),R(J,null,be(k(n).matched,(i,d)=>(v(),R(J,{key:d},[d>0&&!["/","/home","/dashboard"].includes(i.path)?(v(),D(s,{key:0},{default:u(()=>[O(x(k(e).i18n?a.$t("menus."+i.name).indexOf(".")>0?i.meta.title:a.$t("menus."+i.name):i.meta.title),1)]),_:2},1024)):G("",!0)],64))),128))]),_:1})])}}},jn={class:"mgs-nfc rounded p-2 shadow-lg"},Xn={class:"flex justify-between",style:{"font-size":"13px"}},Yn=["src"],Un=["innerHTML"],qn={__name:"message-notification",setup(o){const e=un(),n=P({}),t=P(!1),a=async l=>{n.value=l,await zn.updateReadStatus({ids:[l.id]}),e.messageList.find((s,r)=>{s&&l.id==s.id&&e.messageList.splice(r,1)}),t.value=!0};return(l,s)=>{const r=m("a-badge"),i=m("a-avatar"),d=m("a-list-item-meta"),_=m("a-list-item"),f=m("a-list"),h=m("a-empty"),p=m("a-tab-pane"),g=m("a-tabs"),E=m("a-typography-title"),S=m("a-space"),V=m("a-typography-paragraph"),B=m("a-typography"),U=m("a-modal");return v(),R(J,null,[C("div",jn,[c(g,{"default-active-key":"message",type:"rounded"},{default:u(()=>[c(p,{key:"message"},{title:u(()=>[O(x(l.$t("sys.operationMessage.message"))+" ",1),k(e).messageList.length>0?(v(),D(r,{key:0,count:5,dot:"",dotStyle:{width:"5px",height:"5px",top:"-8px"}})):G("",!0)]),default:u(()=>[k(e).messageList.length>0?(v(),D(f,{key:0,"max-height":230,class:"h-full"},{default:u(()=>[(v(!0),R(J,null,be(k(e).messageList,N=>(v(),D(_,{key:N.id,class:"cursor-pointer",onClick:se=>a(N)},{default:u(()=>[c(d,{title:N.title},{description:u(()=>[C("div",Xn,[C("span",null,"发送人："+x(N.send_user.nickname),1),C("span",null,"时间："+x(N.created_at.substr(0,10)),1)])]),avatar:u(()=>[c(i,{shape:"square"},{default:u(()=>[C("img",{alt:"avatar",src:`${N.send_user.avatar?N.send_user.avatar:l.$url+"avatar.jpg"}`},null,8,Yn)]),_:2},1024)]),_:2},1032,["title"])]),_:2},1032,["onClick"]))),128))]),_:1})):(v(),D(h,{key:1,class:"h-full"}))]),_:1}),c(p,{key:"todo"},{title:u(()=>[O(x(l.$t("sys.operationMessage.todo")),1)]),default:u(()=>[c(h,{class:"h-full"})]),_:1})]),_:1})]),c(U,{visible:t.value,"onUpdate:visible":s[0]||(s[0]=N=>t.value=N),fullscreen:"",footer:!1},{title:u(()=>[O("消息详情")]),default:u(()=>[c(B,{style:{marginTop:"-30px"}},{default:u(()=>[c(E,{class:"text-center"},{default:u(()=>{var N;return[O(x((N=n.value)==null?void 0:N.title),1)]}),_:1}),c(V,{class:"text-right",style:{"font-size":"13px",color:"var(--color-text-3)"}},{default:u(()=>[c(S,{size:"large"},{default:u(()=>{var N;return[C("span",null,"创建时间："+x((N=n.value)==null?void 0:N.created_at),1)]}),_:1})]),_:1}),c(V,null,{default:u(()=>{var N;return[C("div",{innerHTML:(N=n.value)==null?void 0:N.content},null,8,Un)]}),_:1})]),_:1})]),_:1},8,["visible"])],64)}}},Gn=Le(qn,[["__scopeId","data-v-4b835799"]]);class Kn{constructor(e,n){Se(this,"ws",null);Se(this,"serverUrl");Se(this,"heartbeat",{openHeartbeat:!0,interval:10*1e3,timer:null});Se(this,"reconnectConfig",{isReconnect:!0,timer:null,interval:5*1e3,retry:10});Se(this,"onEvent",[]);Se(this,"events",{onOpen:e=>{},onClose:e=>{},onError:e=>{}});this.serverUrl=e,this.events=Object.assign(this.events,n)}on(e,n){this.onEvent[e]=n}connection(){this.ws&&(this.ws.close(),this.ws=null),this.ws=new WebSocket(this.serverUrl),this.ws.onopen=this.onOpen.bind(this),this.ws.onerror=this.onError.bind(this),this.ws.onmessage=this.onMessage.bind(this),this.ws.onclose=this.onClose.bind(this)}onParseData(e){return JSON.parse(e.data)}onOpen(e){this.events.onOpen(e),this.sendHeartbeat()}onClose(e){clearInterval(this.heartbeat.timer),e.code==1006&&this.reconnect(),this.events.onClose(e)}onError(e){this.events.onError(e)}onMessage(e){let n=this.onParseData(e);this.onEvent.hasOwnProperty(n.event)&&this.onEvent[n.event](n.message,n.data),this.onEvent.hasOwnProperty(n.event)||console.warn(`WebSocket 消息事件[${n.event}]未绑定...`)}sendHeartbeat(){this.heartbeat.openHeartbeat&&(this.heartbeat.timer=setInterval(e=>{this.ws.send("PONG")},this.heartbeat.interval))}reconnect(){let e=this.reconnectConfig;!e.isReconnect||e.retry==0||(this.reconnectConfig.isReconnect=!1,e.timer&&clearTimeout(e.timer),this.reconnectConfig.timer=setTimeout(n=>{this.connection(),this.reconnectConfig.isReconnect=!0,this.reconnectConfig.retry--,console.log(`网络连接已断开，正在尝试重新连接(${this.reconnectConfig.retry})...`)},e.interval))}send(e){this.ws&&this.ws.send(JSON.stringify(e))}close(){this.ws.close(),this.ws=null}}class Jn{constructor(){Se(this,"ws");Se(this,"timer",null);Se(this,"interval",10*1e3);this.ws=new Kn("ws://127.0.0.1:9502/message.io?token="+Ye.local.get("token"),{onOpen:e=>{console.log("已成功连接到消息服务器...")},onError:e=>{this.ws=void 0,console.log("未成功连接到消息服务器...")},onClose:e=>{this.ws=void 0,console.log("与消息服务器断开...")}}),this.ws.heartbeat.openHeartbeat=!1}getMessage(){this.timer=setInterval(()=>{this.ws&&this.ws.send({event:"get_unread_message"})},this.interval)}connection(){this.ws.connection()}}const Qn={class:"mr-2 flex justify-end lg:justify-between w-full lg:w-auto"},Zn=["src"],eo={__name:"ma-operation",setup(o){Xt.useI18n();const e=un(),n=Ie(),t=ne();P(null);const a=ye(),l=P(!1),s=P(!1);P(!1);const r=async f=>{if(f==="userCenter"&&a.push({name:"userCenter"}),f==="clearCache"){const h=await Pn.clearAllCache();Ye.local.remove("dictData"),h.success&&dn.success(h.message)}f==="logout"&&(s.value=!0,document.querySelector("#app").style.filter="grayscale(1)")},i=async()=>{await n.logout(),document.querySelector("#app").style.filter="grayscale(0)",a.push({name:"login"})},d=()=>{document.querySelector("#app").style.filter="grayscale(0)"},_=()=>{Ye.screen(document.documentElement),l.value=!l.value};if(t.ws){const f=new Jn;f.connection(),f.getMessage(),f.ws.on("ev_new_message",(h,p)=>{p.length>e.messageList.length&&Mn("新消息提示","您有新的消息，请注意查收！"),e.messageList=p})}return(f,h)=>{const p=m("icon-search"),g=m("a-button"),E=m("a-tooltip"),S=m("icon-fullscreen-exit"),V=m("icon-fullscreen"),B=m("icon-notification"),U=m("a-badge"),N=m("a-trigger"),se=m("icon-settings"),oe=m("a-space"),w=m("a-avatar"),L=m("icon-user"),j=m("a-doption"),ue=m("icon-delete"),b=m("a-divider"),$=m("icon-poweroff"),T=m("a-dropdown"),F=m("a-modal");return v(),R("div",Qn,[c(oe,{class:"mr-0 lg:mr-5",size:"medium"},{default:u(()=>[c(E,{content:f.$t("sys.search")},{default:u(()=>[c(g,{shape:"circle",onClick:h[0]||(h[0]=()=>k(t).searchOpen=!0),class:"hidden lg:inline"},{icon:u(()=>[c(p)]),_:1})]),_:1},8,["content"]),c(E,{content:l.value?f.$t("sys.closeFullScreen"):f.$t("sys.fullScreen")},{default:u(()=>[c(g,{shape:"circle",class:"hidden lg:inline",onClick:_},{icon:u(()=>[l.value?(v(),D(S,{key:0})):(v(),D(V,{key:1}))]),_:1})]),_:1},8,["content"]),c(N,{trigger:"click"},{content:u(()=>[c(Gn)]),default:u(()=>[c(g,{shape:"circle"},{icon:u(()=>[k(e).messageList.length>0?(v(),D(U,{key:0,count:5,dot:"",dotStyle:{width:"5px",height:"5px"}},{default:u(()=>[c(B)]),_:1})):(v(),D(B,{key:1}))]),_:1})]),_:1}),c(E,{content:f.$t("sys.pageSetting")},{default:u(()=>[c(g,{shape:"circle",onClick:h[1]||(h[1]=()=>k(t).settingOpen=!0),class:"hidden lg:inline"},{icon:u(()=>[c(se)]),_:1})]),_:1},8,["content"])]),_:1}),c(T,{onSelect:r,trigger:"hover"},{content:u(()=>[c(j,{value:"userCenter"},{default:u(()=>[c(L),O(" "+x(f.$t("sys.userCenter")),1)]),_:1}),c(j,{value:"clearCache"},{default:u(()=>[c(ue),O(" "+x(f.$t("sys.clearCache")),1)]),_:1}),c(b,{style:{margin:"5px 0"}}),c(j,{value:"logout"},{default:u(()=>[c($),O(" "+x(f.$t("sys.logout")),1)]),_:1})]),default:u(()=>[c(w,{class:"bg-blue-500 text-3xl avatar",style:{top:"-1px"}},{default:u(()=>[C("img",{src:k(n).user&&k(n).user.avatar?f.$tool.showFile(k(n).user.avatar):f.$url+"avatar.jpg"},null,8,Zn)]),_:1})]),_:1}),c(F,{visible:s.value,"onUpdate:visible":h[2]||(h[2]=H=>s.value=H),onOk:i,onCancel:d},{title:u(()=>[O(x(f.$t("sys.logoutAlert")),1)]),default:u(()=>[C("div",null,x(f.$t("sys.logoutMessage")),1)]),_:1},8,["visible"])])}}},Ct=Le(eo,[["__scopeId","data-v-6225d6ba"]]);/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function en(o,e){var n=Object.keys(o);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(o);e&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(o,a).enumerable})),n.push.apply(n,t)}return n}function Ce(o){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?en(Object(n),!0).forEach(function(t){to(o,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):en(Object(n)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(n,t))})}return o}function ht(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ht=function(e){return typeof e}:ht=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ht(o)}function to(o,e,n){return e in o?Object.defineProperty(o,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[e]=n,o}function Te(){return Te=Object.assign||function(o){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(o[t]=n[t])}return o},Te.apply(this,arguments)}function no(o,e){if(o==null)return{};var n={},t=Object.keys(o),a,l;for(l=0;l<t.length;l++)a=t[l],!(e.indexOf(a)>=0)&&(n[a]=o[a]);return n}function oo(o,e){if(o==null)return{};var n=no(o,e),t,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(o);for(a=0;a<l.length;a++)t=l[a],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(o,t)&&(n[t]=o[t])}return n}var ao="1.15.2";function xe(o){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(o)}var Ae=xe(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),it=xe(/Edge/i),tn=xe(/firefox/i),tt=xe(/safari/i)&&!xe(/chrome/i)&&!xe(/android/i),mn=xe(/iP(ad|od|hone)/i),gn=xe(/chrome/i)&&xe(/android/i),_n={capture:!1,passive:!1};function z(o,e,n){o.addEventListener(e,n,!Ae&&_n)}function W(o,e,n){o.removeEventListener(e,n,!Ae&&_n)}function yt(o,e){if(e){if(e[0]===">"&&(e=e.substring(1)),o)try{if(o.matches)return o.matches(e);if(o.msMatchesSelector)return o.msMatchesSelector(e);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(e)}catch{return!1}return!1}}function lo(o){return o.host&&o!==document&&o.host.nodeType?o.host:o.parentNode}function _e(o,e,n,t){if(o){n=n||document;do{if(e!=null&&(e[0]===">"?o.parentNode===n&&yt(o,e):yt(o,e))||t&&o===n)return o;if(o===n)break}while(o=lo(o))}return null}var nn=/\s+/g;function fe(o,e,n){if(o&&e)if(o.classList)o.classList[n?"add":"remove"](e);else{var t=(" "+o.className+" ").replace(nn," ").replace(" "+e+" "," ");o.className=(t+(n?" "+e:"")).replace(nn," ")}}function I(o,e,n){var t=o&&o.style;if(t){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(o,""):o.currentStyle&&(n=o.currentStyle),e===void 0?n:n[e];!(e in t)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),t[e]=n+(typeof n=="string"?"":"px")}}function Ue(o,e){var n="";if(typeof o=="string")n=o;else do{var t=I(o,"transform");t&&t!=="none"&&(n=t+" "+n)}while(!e&&(o=o.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(n)}function vn(o,e,n){if(o){var t=o.getElementsByTagName(e),a=0,l=t.length;if(n)for(;a<l;a++)n(t[a],a);return t}return[]}function Ee(){var o=document.scrollingElement;return o||document.documentElement}function Z(o,e,n,t,a){if(!(!o.getBoundingClientRect&&o!==window)){var l,s,r,i,d,_,f;if(o!==window&&o.parentNode&&o!==Ee()?(l=o.getBoundingClientRect(),s=l.top,r=l.left,i=l.bottom,d=l.right,_=l.height,f=l.width):(s=0,r=0,i=window.innerHeight,d=window.innerWidth,_=window.innerHeight,f=window.innerWidth),(e||n)&&o!==window&&(a=a||o.parentNode,!Ae))do if(a&&a.getBoundingClientRect&&(I(a,"transform")!=="none"||n&&I(a,"position")!=="static")){var h=a.getBoundingClientRect();s-=h.top+parseInt(I(a,"border-top-width")),r-=h.left+parseInt(I(a,"border-left-width")),i=s+l.height,d=r+l.width;break}while(a=a.parentNode);if(t&&o!==window){var p=Ue(a||o),g=p&&p.a,E=p&&p.d;p&&(s/=E,r/=g,f/=g,_/=E,i=s+_,d=r+f)}return{top:s,left:r,bottom:i,right:d,width:f,height:_}}}function on(o,e,n){for(var t=Ne(o,!0),a=Z(o)[e];t;){var l=Z(t)[n],s=void 0;if(s=a>=l,!s)return t;if(t===Ee())break;t=Ne(t,!1)}return!1}function Je(o,e,n,t){for(var a=0,l=0,s=o.children;l<s.length;){if(s[l].style.display!=="none"&&s[l]!==A.ghost&&(t||s[l]!==A.dragged)&&_e(s[l],n.draggable,o,!1)){if(a===e)return s[l];a++}l++}return null}function Ut(o,e){for(var n=o.lastElementChild;n&&(n===A.ghost||I(n,"display")==="none"||e&&!yt(n,e));)n=n.previousElementSibling;return n||null}function me(o,e){var n=0;if(!o||!o.parentNode)return-1;for(;o=o.previousElementSibling;)o.nodeName.toUpperCase()!=="TEMPLATE"&&o!==A.clone&&(!e||yt(o,e))&&n++;return n}function an(o){var e=0,n=0,t=Ee();if(o)do{var a=Ue(o),l=a.a,s=a.d;e+=o.scrollLeft*l,n+=o.scrollTop*s}while(o!==t&&(o=o.parentNode));return[e,n]}function so(o,e){for(var n in o)if(o.hasOwnProperty(n)){for(var t in e)if(e.hasOwnProperty(t)&&e[t]===o[n][t])return Number(n)}return-1}function Ne(o,e){if(!o||!o.getBoundingClientRect)return Ee();var n=o,t=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var a=I(n);if(n.clientWidth<n.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Ee();if(t||e)return n;t=!0}}while(n=n.parentNode);return Ee()}function io(o,e){if(o&&e)for(var n in e)e.hasOwnProperty(n)&&(o[n]=e[n]);return o}function Ot(o,e){return Math.round(o.top)===Math.round(e.top)&&Math.round(o.left)===Math.round(e.left)&&Math.round(o.height)===Math.round(e.height)&&Math.round(o.width)===Math.round(e.width)}var nt;function yn(o,e){return function(){if(!nt){var n=arguments,t=this;n.length===1?o.call(t,n[0]):o.apply(t,n),nt=setTimeout(function(){nt=void 0},e)}}}function ro(){clearTimeout(nt),nt=void 0}function bn(o,e,n){o.scrollLeft+=e,o.scrollTop+=n}function wn(o){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(o).cloneNode(!0):n?n(o).clone(!0)[0]:o.cloneNode(!0)}function Sn(o,e,n){var t={};return Array.from(o.children).forEach(function(a){var l,s,r,i;if(!(!_e(a,e.draggable,o,!1)||a.animated||a===n)){var d=Z(a);t.left=Math.min((l=t.left)!==null&&l!==void 0?l:1/0,d.left),t.top=Math.min((s=t.top)!==null&&s!==void 0?s:1/0,d.top),t.right=Math.max((r=t.right)!==null&&r!==void 0?r:-1/0,d.right),t.bottom=Math.max((i=t.bottom)!==null&&i!==void 0?i:-1/0,d.bottom)}}),t.width=t.right-t.left,t.height=t.bottom-t.top,t.x=t.left,t.y=t.top,t}var he="Sortable"+new Date().getTime();function co(){var o=[],e;return{captureAnimationState:function(){if(o=[],!!this.options.animation){var t=[].slice.call(this.el.children);t.forEach(function(a){if(!(I(a,"display")==="none"||a===A.ghost)){o.push({target:a,rect:Z(a)});var l=Ce({},o[o.length-1].rect);if(a.thisAnimationDuration){var s=Ue(a,!0);s&&(l.top-=s.f,l.left-=s.e)}a.fromRect=l}})}},addAnimationState:function(t){o.push(t)},removeAnimationState:function(t){o.splice(so(o,{target:t}),1)},animateAll:function(t){var a=this;if(!this.options.animation){clearTimeout(e),typeof t=="function"&&t();return}var l=!1,s=0;o.forEach(function(r){var i=0,d=r.target,_=d.fromRect,f=Z(d),h=d.prevFromRect,p=d.prevToRect,g=r.rect,E=Ue(d,!0);E&&(f.top-=E.f,f.left-=E.e),d.toRect=f,d.thisAnimationDuration&&Ot(h,f)&&!Ot(_,f)&&(g.top-f.top)/(g.left-f.left)===(_.top-f.top)/(_.left-f.left)&&(i=fo(g,h,p,a.options)),Ot(f,_)||(d.prevFromRect=_,d.prevToRect=f,i||(i=a.options.animation),a.animate(d,g,f,i)),i&&(l=!0,s=Math.max(s,i),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},i),d.thisAnimationDuration=i)}),clearTimeout(e),l?e=setTimeout(function(){typeof t=="function"&&t()},s):typeof t=="function"&&t(),o=[]},animate:function(t,a,l,s){if(s){I(t,"transition",""),I(t,"transform","");var r=Ue(this.el),i=r&&r.a,d=r&&r.d,_=(a.left-l.left)/(i||1),f=(a.top-l.top)/(d||1);t.animatingX=!!_,t.animatingY=!!f,I(t,"transform","translate3d("+_+"px,"+f+"px,0)"),this.forRepaintDummy=uo(t),I(t,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),I(t,"transform","translate3d(0,0,0)"),typeof t.animated=="number"&&clearTimeout(t.animated),t.animated=setTimeout(function(){I(t,"transition",""),I(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},s)}}}}function uo(o){return o.offsetWidth}function fo(o,e,n,t){return Math.sqrt(Math.pow(e.top-o.top,2)+Math.pow(e.left-o.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*t.animation}var ze=[],It={initializeByDefault:!0},rt={mount:function(e){for(var n in It)It.hasOwnProperty(n)&&!(n in e)&&(e[n]=It[n]);ze.forEach(function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),ze.push(e)},pluginEvent:function(e,n,t){var a=this;this.eventCanceled=!1,t.cancel=function(){a.eventCanceled=!0};var l=e+"Global";ze.forEach(function(s){n[s.pluginName]&&(n[s.pluginName][l]&&n[s.pluginName][l](Ce({sortable:n},t)),n.options[s.pluginName]&&n[s.pluginName][e]&&n[s.pluginName][e](Ce({sortable:n},t)))})},initializePlugins:function(e,n,t,a){ze.forEach(function(r){var i=r.pluginName;if(!(!e.options[i]&&!r.initializeByDefault)){var d=new r(e,n,e.options);d.sortable=e,d.options=e.options,e[i]=d,Te(t,d.defaults)}});for(var l in e.options)if(e.options.hasOwnProperty(l)){var s=this.modifyOption(e,l,e.options[l]);typeof s<"u"&&(e.options[l]=s)}},getEventProperties:function(e,n){var t={};return ze.forEach(function(a){typeof a.eventProperties=="function"&&Te(t,a.eventProperties.call(n[a.pluginName],e))}),t},modifyOption:function(e,n,t){var a;return ze.forEach(function(l){e[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[n]=="function"&&(a=l.optionListeners[n].call(e[l.pluginName],t))}),a}};function po(o){var e=o.sortable,n=o.rootEl,t=o.name,a=o.targetEl,l=o.cloneEl,s=o.toEl,r=o.fromEl,i=o.oldIndex,d=o.newIndex,_=o.oldDraggableIndex,f=o.newDraggableIndex,h=o.originalEvent,p=o.putSortable,g=o.extraEventProperties;if(e=e||n&&n[he],!!e){var E,S=e.options,V="on"+t.charAt(0).toUpperCase()+t.substr(1);window.CustomEvent&&!Ae&&!it?E=new CustomEvent(t,{bubbles:!0,cancelable:!0}):(E=document.createEvent("Event"),E.initEvent(t,!0,!0)),E.to=s||n,E.from=r||n,E.item=a||n,E.clone=l,E.oldIndex=i,E.newIndex=d,E.oldDraggableIndex=_,E.newDraggableIndex=f,E.originalEvent=h,E.pullMode=p?p.lastPutMode:void 0;var B=Ce(Ce({},g),rt.getEventProperties(t,e));for(var U in B)E[U]=B[U];n&&n.dispatchEvent(E),S[V]&&S[V].call(e,E)}}var ho=["evt"],re=function(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=t.evt,l=oo(t,ho);rt.pluginEvent.bind(A)(e,n,Ce({dragEl:y,parentEl:K,ghostEl:M,rootEl:Y,nextEl:We,lastDownEl:mt,cloneEl:q,cloneHidden:Pe,dragStarted:Qe,putSortable:ee,activeSortable:A.active,originalEvent:a,oldIndex:Xe,oldDraggableIndex:ot,newIndex:pe,newDraggableIndex:Me,hideGhostForTarget:$n,unhideGhostForTarget:xn,cloneNowHidden:function(){Pe=!0},cloneNowShown:function(){Pe=!1},dispatchSortableEvent:function(r){le({sortable:n,name:r,originalEvent:a})}},l))};function le(o){po(Ce({putSortable:ee,cloneEl:q,targetEl:y,rootEl:Y,oldIndex:Xe,oldDraggableIndex:ot,newIndex:pe,newDraggableIndex:Me},o))}var y,K,M,Y,We,mt,q,Pe,Xe,pe,ot,Me,ut,ee,je=!1,bt=!1,wt=[],Fe,ge,At,Mt,ln,sn,Qe,Be,at,lt=!1,dt=!1,gt,ae,Pt=[],Wt=!1,St=[],kt=typeof document<"u",ft=mn,rn=it||Ae?"cssFloat":"float",mo=kt&&!gn&&!mn&&"draggable"in document.createElement("div"),En=function(){if(kt){if(Ae)return!1;var o=document.createElement("x");return o.style.cssText="pointer-events:auto",o.style.pointerEvents==="auto"}}(),Cn=function(e,n){var t=I(e),a=parseInt(t.width)-parseInt(t.paddingLeft)-parseInt(t.paddingRight)-parseInt(t.borderLeftWidth)-parseInt(t.borderRightWidth),l=Je(e,0,n),s=Je(e,1,n),r=l&&I(l),i=s&&I(s),d=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+Z(l).width,_=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+Z(s).width;if(t.display==="flex")return t.flexDirection==="column"||t.flexDirection==="column-reverse"?"vertical":"horizontal";if(t.display==="grid")return t.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&r.float&&r.float!=="none"){var f=r.float==="left"?"left":"right";return s&&(i.clear==="both"||i.clear===f)?"vertical":"horizontal"}return l&&(r.display==="block"||r.display==="flex"||r.display==="table"||r.display==="grid"||d>=a&&t[rn]==="none"||s&&t[rn]==="none"&&d+_>a)?"vertical":"horizontal"},go=function(e,n,t){var a=t?e.left:e.top,l=t?e.right:e.bottom,s=t?e.width:e.height,r=t?n.left:n.top,i=t?n.right:n.bottom,d=t?n.width:n.height;return a===r||l===i||a+s/2===r+d/2},_o=function(e,n){var t;return wt.some(function(a){var l=a[he].options.emptyInsertThreshold;if(!(!l||Ut(a))){var s=Z(a),r=e>=s.left-l&&e<=s.right+l,i=n>=s.top-l&&n<=s.bottom+l;if(r&&i)return t=a}}),t},kn=function(e){function n(l,s){return function(r,i,d,_){var f=r.options.group.name&&i.options.group.name&&r.options.group.name===i.options.group.name;if(l==null&&(s||f))return!0;if(l==null||l===!1)return!1;if(s&&l==="clone")return l;if(typeof l=="function")return n(l(r,i,d,_),s)(r,i,d,_);var h=(s?r:i).options.group.name;return l===!0||typeof l=="string"&&l===h||l.join&&l.indexOf(h)>-1}}var t={},a=e.group;(!a||ht(a)!="object")&&(a={name:a}),t.name=a.name,t.checkPull=n(a.pull,!0),t.checkPut=n(a.put),t.revertClone=a.revertClone,e.group=t},$n=function(){!En&&M&&I(M,"display","none")},xn=function(){!En&&M&&I(M,"display","")};kt&&!gn&&document.addEventListener("click",function(o){if(bt)return o.preventDefault(),o.stopPropagation&&o.stopPropagation(),o.stopImmediatePropagation&&o.stopImmediatePropagation(),bt=!1,!1},!0);var Ve=function(e){if(y){e=e.touches?e.touches[0]:e;var n=_o(e.clientX,e.clientY);if(n){var t={};for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.target=t.rootEl=n,t.preventDefault=void 0,t.stopPropagation=void 0,n[he]._onDragOver(t)}}},vo=function(e){y&&y.parentNode[he]._isOutsideThisEl(e.target)};function A(o,e){if(!(o&&o.nodeType&&o.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(o));this.el=o,this.options=e=Te({},e),o[he]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(o.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Cn(o,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,r){s.setData("Text",r.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:A.supportPointer!==!1&&"PointerEvent"in window&&!tt,emptyInsertThreshold:5};rt.initializePlugins(this,o,n);for(var t in n)!(t in e)&&(e[t]=n[t]);kn(e);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=e.forceFallback?!1:mo,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?z(o,"pointerdown",this._onTapStart):(z(o,"mousedown",this._onTapStart),z(o,"touchstart",this._onTapStart)),this.nativeDraggable&&(z(o,"dragover",this),z(o,"dragenter",this)),wt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Te(this,co())}A.prototype={constructor:A,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Be=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,y):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,t=this.el,a=this.options,l=a.preventOnFilter,s=e.type,r=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,i=(r||e).target,d=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||i,_=a.filter;if($o(t),!y&&!(/mousedown|pointerdown/.test(s)&&e.button!==0||a.disabled)&&!d.isContentEditable&&!(!this.nativeDraggable&&tt&&i&&i.tagName.toUpperCase()==="SELECT")&&(i=_e(i,a.draggable,t,!1),!(i&&i.animated)&&mt!==i)){if(Xe=me(i),ot=me(i,a.draggable),typeof _=="function"){if(_.call(this,e,i,this)){le({sortable:n,rootEl:d,name:"filter",targetEl:i,toEl:t,fromEl:t}),re("filter",n,{evt:e}),l&&e.cancelable&&e.preventDefault();return}}else if(_&&(_=_.split(",").some(function(f){if(f=_e(d,f.trim(),t,!1),f)return le({sortable:n,rootEl:f,name:"filter",targetEl:i,fromEl:t,toEl:t}),re("filter",n,{evt:e}),!0}),_)){l&&e.cancelable&&e.preventDefault();return}a.handle&&!_e(d,a.handle,t,!1)||this._prepareDragStart(e,r,i)}}},_prepareDragStart:function(e,n,t){var a=this,l=a.el,s=a.options,r=l.ownerDocument,i;if(t&&!y&&t.parentNode===l){var d=Z(t);if(Y=l,y=t,K=y.parentNode,We=y.nextSibling,mt=t,ut=s.group,A.dragged=y,Fe={target:y,clientX:(n||e).clientX,clientY:(n||e).clientY},ln=Fe.clientX-d.left,sn=Fe.clientY-d.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,y.style["will-change"]="all",i=function(){if(re("delayEnded",a,{evt:e}),A.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!tn&&a.nativeDraggable&&(y.draggable=!0),a._triggerDragStart(e,n),le({sortable:a,name:"choose",originalEvent:e}),fe(y,s.chosenClass,!0)},s.ignore.split(",").forEach(function(_){vn(y,_.trim(),Nt)}),z(r,"dragover",Ve),z(r,"mousemove",Ve),z(r,"touchmove",Ve),z(r,"mouseup",a._onDrop),z(r,"touchend",a._onDrop),z(r,"touchcancel",a._onDrop),tn&&this.nativeDraggable&&(this.options.touchStartThreshold=4,y.draggable=!0),re("delayStart",this,{evt:e}),s.delay&&(!s.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(it||Ae))){if(A.eventCanceled){this._onDrop();return}z(r,"mouseup",a._disableDelayedDrag),z(r,"touchend",a._disableDelayedDrag),z(r,"touchcancel",a._disableDelayedDrag),z(r,"mousemove",a._delayedDragTouchMoveHandler),z(r,"touchmove",a._delayedDragTouchMoveHandler),s.supportPointer&&z(r,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(i,s.delay)}else i()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){y&&Nt(y),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;W(e,"mouseup",this._disableDelayedDrag),W(e,"touchend",this._disableDelayedDrag),W(e,"touchcancel",this._disableDelayedDrag),W(e,"mousemove",this._delayedDragTouchMoveHandler),W(e,"touchmove",this._delayedDragTouchMoveHandler),W(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?z(document,"pointermove",this._onTouchMove):n?z(document,"touchmove",this._onTouchMove):z(document,"mousemove",this._onTouchMove):(z(y,"dragend",this),z(Y,"dragstart",this._onDragStart));try{document.selection?_t(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(je=!1,Y&&y){re("dragStarted",this,{evt:n}),this.nativeDraggable&&z(document,"dragover",vo);var t=this.options;!e&&fe(y,t.dragClass,!1),fe(y,t.ghostClass,!0),A.active=this,e&&this._appendGhost(),le({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(ge){this._lastX=ge.clientX,this._lastY=ge.clientY,$n();for(var e=document.elementFromPoint(ge.clientX,ge.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ge.clientX,ge.clientY),e!==n);)n=e;if(y.parentNode[he]._isOutsideThisEl(e),n)do{if(n[he]){var t=void 0;if(t=n[he]._onDragOver({clientX:ge.clientX,clientY:ge.clientY,target:e,rootEl:n}),t&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);xn()}},_onTouchMove:function(e){if(Fe){var n=this.options,t=n.fallbackTolerance,a=n.fallbackOffset,l=e.touches?e.touches[0]:e,s=M&&Ue(M,!0),r=M&&s&&s.a,i=M&&s&&s.d,d=ft&&ae&&an(ae),_=(l.clientX-Fe.clientX+a.x)/(r||1)+(d?d[0]-Pt[0]:0)/(r||1),f=(l.clientY-Fe.clientY+a.y)/(i||1)+(d?d[1]-Pt[1]:0)/(i||1);if(!A.active&&!je){if(t&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<t)return;this._onDragStart(e,!0)}if(M){s?(s.e+=_-(At||0),s.f+=f-(Mt||0)):s={a:1,b:0,c:0,d:1,e:_,f};var h="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");I(M,"webkitTransform",h),I(M,"mozTransform",h),I(M,"msTransform",h),I(M,"transform",h),At=_,Mt=f,ge=l}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!M){var e=this.options.fallbackOnBody?document.body:Y,n=Z(y,!0,ft,!0,e),t=this.options;if(ft){for(ae=e;I(ae,"position")==="static"&&I(ae,"transform")==="none"&&ae!==document;)ae=ae.parentNode;ae!==document.body&&ae!==document.documentElement?(ae===document&&(ae=Ee()),n.top+=ae.scrollTop,n.left+=ae.scrollLeft):ae=Ee(),Pt=an(ae)}M=y.cloneNode(!0),fe(M,t.ghostClass,!1),fe(M,t.fallbackClass,!0),fe(M,t.dragClass,!0),I(M,"transition",""),I(M,"transform",""),I(M,"box-sizing","border-box"),I(M,"margin",0),I(M,"top",n.top),I(M,"left",n.left),I(M,"width",n.width),I(M,"height",n.height),I(M,"opacity","0.8"),I(M,"position",ft?"absolute":"fixed"),I(M,"zIndex","100000"),I(M,"pointerEvents","none"),A.ghost=M,e.appendChild(M),I(M,"transform-origin",ln/parseInt(M.style.width)*100+"% "+sn/parseInt(M.style.height)*100+"%")}},_onDragStart:function(e,n){var t=this,a=e.dataTransfer,l=t.options;if(re("dragStart",this,{evt:e}),A.eventCanceled){this._onDrop();return}re("setupClone",this),A.eventCanceled||(q=wn(y),q.removeAttribute("id"),q.draggable=!1,q.style["will-change"]="",this._hideClone(),fe(q,this.options.chosenClass,!1),A.clone=q),t.cloneId=_t(function(){re("clone",t),!A.eventCanceled&&(t.options.removeCloneOnHide||Y.insertBefore(q,y),t._hideClone(),le({sortable:t,name:"clone"}))}),!n&&fe(y,l.dragClass,!0),n?(bt=!0,t._loopId=setInterval(t._emulateDragOver,50)):(W(document,"mouseup",t._onDrop),W(document,"touchend",t._onDrop),W(document,"touchcancel",t._onDrop),a&&(a.effectAllowed="move",l.setData&&l.setData.call(t,a,y)),z(document,"drop",t),I(y,"transform","translateZ(0)")),je=!0,t._dragStartId=_t(t._dragStarted.bind(t,n,e)),z(document,"selectstart",t),Qe=!0,tt&&I(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,t=e.target,a,l,s,r=this.options,i=r.group,d=A.active,_=ut===i,f=r.sort,h=ee||d,p,g=this,E=!1;if(Wt)return;function S(we,X){re(we,g,Ce({evt:e,isOwner:_,axis:p?"vertical":"horizontal",revert:s,dragRect:a,targetRect:l,canSort:f,fromSortable:h,target:t,completed:B,onMove:function(ct,Dt){return pt(Y,n,y,a,ct,Z(ct),e,Dt)},changed:U},X))}function V(){S("dragOverAnimationCapture"),g.captureAnimationState(),g!==h&&h.captureAnimationState()}function B(we){return S("dragOverCompleted",{insertion:we}),we&&(_?d._hideClone():d._showClone(g),g!==h&&(fe(y,ee?ee.options.ghostClass:d.options.ghostClass,!1),fe(y,r.ghostClass,!0)),ee!==g&&g!==A.active?ee=g:g===A.active&&ee&&(ee=null),h===g&&(g._ignoreWhileAnimating=t),g.animateAll(function(){S("dragOverAnimationComplete"),g._ignoreWhileAnimating=null}),g!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(t===y&&!y.animated||t===n&&!t.animated)&&(Be=null),!r.dragoverBubble&&!e.rootEl&&t!==document&&(y.parentNode[he]._isOutsideThisEl(e.target),!we&&Ve(e)),!r.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),E=!0}function U(){pe=me(y),Me=me(y,r.draggable),le({sortable:g,name:"change",toEl:n,newIndex:pe,newDraggableIndex:Me,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),t=_e(t,r.draggable,n,!0),S("dragOver"),A.eventCanceled)return E;if(y.contains(e.target)||t.animated&&t.animatingX&&t.animatingY||g._ignoreWhileAnimating===t)return B(!1);if(bt=!1,d&&!r.disabled&&(_?f||(s=K!==Y):ee===this||(this.lastPutMode=ut.checkPull(this,d,y,e))&&i.checkPut(this,d,y,e))){if(p=this._getDirection(e,t)==="vertical",a=Z(y),S("dragOverValid"),A.eventCanceled)return E;if(s)return K=Y,V(),this._hideClone(),S("revert"),A.eventCanceled||(We?Y.insertBefore(y,We):Y.appendChild(y)),B(!0);var N=Ut(n,r.draggable);if(!N||So(e,p,this)&&!N.animated){if(N===y)return B(!1);if(N&&n===e.target&&(t=N),t&&(l=Z(t)),pt(Y,n,y,a,t,l,e,!!t)!==!1)return V(),N&&N.nextSibling?n.insertBefore(y,N.nextSibling):n.appendChild(y),K=n,U(),B(!0)}else if(N&&wo(e,p,this)){var se=Je(n,0,r,!0);if(se===y)return B(!1);if(t=se,l=Z(t),pt(Y,n,y,a,t,l,e,!1)!==!1)return V(),n.insertBefore(y,se),K=n,U(),B(!0)}else if(t.parentNode===n){l=Z(t);var oe=0,w,L=y.parentNode!==n,j=!go(y.animated&&y.toRect||a,t.animated&&t.toRect||l,p),ue=p?"top":"left",b=on(t,"top","top")||on(y,"top","top"),$=b?b.scrollTop:void 0;Be!==t&&(w=l[ue],lt=!1,dt=!j&&r.invertSwap||L),oe=Eo(e,t,l,p,j?1:r.swapThreshold,r.invertedSwapThreshold==null?r.swapThreshold:r.invertedSwapThreshold,dt,Be===t);var T;if(oe!==0){var F=me(y);do F-=oe,T=K.children[F];while(T&&(I(T,"display")==="none"||T===M))}if(oe===0||T===t)return B(!1);Be=t,at=oe;var H=t.nextElementSibling,de=!1;de=oe===1;var ke=pt(Y,n,y,a,t,l,e,de);if(ke!==!1)return(ke===1||ke===-1)&&(de=ke===1),Wt=!0,setTimeout(bo,30),V(),de&&!H?n.appendChild(y):t.parentNode.insertBefore(y,de?H:t),b&&bn(b,0,$-b.scrollTop),K=y.parentNode,w!==void 0&&!dt&&(gt=Math.abs(w-Z(t)[ue])),U(),B(!0)}if(n.contains(y))return B(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){W(document,"mousemove",this._onTouchMove),W(document,"touchmove",this._onTouchMove),W(document,"pointermove",this._onTouchMove),W(document,"dragover",Ve),W(document,"mousemove",Ve),W(document,"touchmove",Ve)},_offUpEvents:function(){var e=this.el.ownerDocument;W(e,"mouseup",this._onDrop),W(e,"touchend",this._onDrop),W(e,"pointerup",this._onDrop),W(e,"touchcancel",this._onDrop),W(document,"selectstart",this)},_onDrop:function(e){var n=this.el,t=this.options;if(pe=me(y),Me=me(y,t.draggable),re("drop",this,{evt:e}),K=y&&y.parentNode,pe=me(y),Me=me(y,t.draggable),A.eventCanceled){this._nulling();return}je=!1,dt=!1,lt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),zt(this.cloneId),zt(this._dragStartId),this.nativeDraggable&&(W(document,"drop",this),W(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),tt&&I(document.body,"user-select",""),I(y,"transform",""),e&&(Qe&&(e.cancelable&&e.preventDefault(),!t.dropBubble&&e.stopPropagation()),M&&M.parentNode&&M.parentNode.removeChild(M),(Y===K||ee&&ee.lastPutMode!=="clone")&&q&&q.parentNode&&q.parentNode.removeChild(q),y&&(this.nativeDraggable&&W(y,"dragend",this),Nt(y),y.style["will-change"]="",Qe&&!je&&fe(y,ee?ee.options.ghostClass:this.options.ghostClass,!1),fe(y,this.options.chosenClass,!1),le({sortable:this,name:"unchoose",toEl:K,newIndex:null,newDraggableIndex:null,originalEvent:e}),Y!==K?(pe>=0&&(le({rootEl:K,name:"add",toEl:K,fromEl:Y,originalEvent:e}),le({sortable:this,name:"remove",toEl:K,originalEvent:e}),le({rootEl:K,name:"sort",toEl:K,fromEl:Y,originalEvent:e}),le({sortable:this,name:"sort",toEl:K,originalEvent:e})),ee&&ee.save()):pe!==Xe&&pe>=0&&(le({sortable:this,name:"update",toEl:K,originalEvent:e}),le({sortable:this,name:"sort",toEl:K,originalEvent:e})),A.active&&((pe==null||pe===-1)&&(pe=Xe,Me=ot),le({sortable:this,name:"end",toEl:K,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){re("nulling",this),Y=y=K=M=We=q=mt=Pe=Fe=ge=Qe=pe=Me=Xe=ot=Be=at=ee=ut=A.dragged=A.ghost=A.clone=A.active=null,St.forEach(function(e){e.checked=!0}),St.length=At=Mt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":y&&(this._onDragOver(e),yo(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,t=this.el.children,a=0,l=t.length,s=this.options;a<l;a++)n=t[a],_e(n,s.draggable,this.el,!1)&&e.push(n.getAttribute(s.dataIdAttr)||ko(n));return e},sort:function(e,n){var t={},a=this.el;this.toArray().forEach(function(l,s){var r=a.children[s];_e(r,this.options.draggable,a,!1)&&(t[l]=r)},this),n&&this.captureAnimationState(),e.forEach(function(l){t[l]&&(a.removeChild(t[l]),a.appendChild(t[l]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return _e(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var t=this.options;if(n===void 0)return t[e];var a=rt.modifyOption(this,e,n);typeof a<"u"?t[e]=a:t[e]=n,e==="group"&&kn(t)},destroy:function(){re("destroy",this);var e=this.el;e[he]=null,W(e,"mousedown",this._onTapStart),W(e,"touchstart",this._onTapStart),W(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(W(e,"dragover",this),W(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),wt.splice(wt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Pe){if(re("hideClone",this),A.eventCanceled)return;I(q,"display","none"),this.options.removeCloneOnHide&&q.parentNode&&q.parentNode.removeChild(q),Pe=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Pe){if(re("showClone",this),A.eventCanceled)return;y.parentNode==Y&&!this.options.group.revertClone?Y.insertBefore(q,y):We?Y.insertBefore(q,We):Y.appendChild(q),this.options.group.revertClone&&this.animate(y,q),I(q,"display",""),Pe=!1}}};function yo(o){o.dataTransfer&&(o.dataTransfer.dropEffect="move"),o.cancelable&&o.preventDefault()}function pt(o,e,n,t,a,l,s,r){var i,d=o[he],_=d.options.onMove,f;return window.CustomEvent&&!Ae&&!it?i=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(i=document.createEvent("Event"),i.initEvent("move",!0,!0)),i.to=e,i.from=o,i.dragged=n,i.draggedRect=t,i.related=a||e,i.relatedRect=l||Z(e),i.willInsertAfter=r,i.originalEvent=s,o.dispatchEvent(i),_&&(f=_.call(d,i,s)),f}function Nt(o){o.draggable=!1}function bo(){Wt=!1}function wo(o,e,n){var t=Z(Je(n.el,0,n.options,!0)),a=Sn(n.el,n.options,M),l=10;return e?o.clientX<a.left-l||o.clientY<t.top&&o.clientX<t.right:o.clientY<a.top-l||o.clientY<t.bottom&&o.clientX<t.left}function So(o,e,n){var t=Z(Ut(n.el,n.options.draggable)),a=Sn(n.el,n.options,M),l=10;return e?o.clientX>a.right+l||o.clientY>t.bottom&&o.clientX>t.left:o.clientY>a.bottom+l||o.clientX>t.right&&o.clientY>t.top}function Eo(o,e,n,t,a,l,s,r){var i=t?o.clientY:o.clientX,d=t?n.height:n.width,_=t?n.top:n.left,f=t?n.bottom:n.right,h=!1;if(!s){if(r&&gt<d*a){if(!lt&&(at===1?i>_+d*l/2:i<f-d*l/2)&&(lt=!0),lt)h=!0;else if(at===1?i<_+gt:i>f-gt)return-at}else if(i>_+d*(1-a)/2&&i<f-d*(1-a)/2)return Co(e)}return h=h||s,h&&(i<_+d*l/2||i>f-d*l/2)?i>_+d/2?1:-1:0}function Co(o){return me(y)<me(o)?1:-1}function ko(o){for(var e=o.tagName+o.className+o.src+o.href+o.textContent,n=e.length,t=0;n--;)t+=e.charCodeAt(n);return t.toString(36)}function $o(o){St.length=0;for(var e=o.getElementsByTagName("input"),n=e.length;n--;){var t=e[n];t.checked&&St.push(t)}}function _t(o){return setTimeout(o,0)}function zt(o){return clearTimeout(o)}kt&&z(document,"touchmove",function(o){(A.active||je)&&o.cancelable&&o.preventDefault()});A.utils={on:z,off:W,css:I,find:vn,is:function(e,n){return!!_e(e,n,e,!1)},extend:io,throttle:yn,closest:_e,toggleClass:fe,clone:wn,index:me,nextTick:_t,cancelNextTick:zt,detectDirection:Cn,getChild:Je};A.get=function(o){return o[he]};A.mount=function(){for(var o=arguments.length,e=new Array(o),n=0;n<o;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(A.utils=Ce(Ce({},A.utils),t.utils)),rt.mount(t)})};A.create=function(o,e){return new A(o,e)};A.version=ao;var Q=[],Ze,Bt,Ht=!1,Lt,Rt,Et,et;function xo(){function o(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return o.prototype={dragStarted:function(n){var t=n.originalEvent;this.sortable.nativeDraggable?z(document,"dragover",this._handleAutoScroll):this.options.supportPointer?z(document,"pointermove",this._handleFallbackAutoScroll):t.touches?z(document,"touchmove",this._handleFallbackAutoScroll):z(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var t=n.originalEvent;!this.options.dragOverBubble&&!t.rootEl&&this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?W(document,"dragover",this._handleAutoScroll):(W(document,"pointermove",this._handleFallbackAutoScroll),W(document,"touchmove",this._handleFallbackAutoScroll),W(document,"mousemove",this._handleFallbackAutoScroll)),cn(),vt(),ro()},nulling:function(){Et=Bt=Ze=Ht=et=Lt=Rt=null,Q.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,t){var a=this,l=(n.touches?n.touches[0]:n).clientX,s=(n.touches?n.touches[0]:n).clientY,r=document.elementFromPoint(l,s);if(Et=n,t||this.options.forceAutoScrollFallback||it||Ae||tt){Ft(n,this.options,r,t);var i=Ne(r,!0);Ht&&(!et||l!==Lt||s!==Rt)&&(et&&cn(),et=setInterval(function(){var d=Ne(document.elementFromPoint(l,s),!0);d!==i&&(i=d,vt()),Ft(n,a.options,d,t)},10),Lt=l,Rt=s)}else{if(!this.options.bubbleScroll||Ne(r,!0)===Ee()){vt();return}Ft(n,this.options,Ne(r,!1),!1)}}},Te(o,{pluginName:"scroll",initializeByDefault:!0})}function vt(){Q.forEach(function(o){clearInterval(o.pid)}),Q=[]}function cn(){clearInterval(et)}var Ft=yn(function(o,e,n,t){if(e.scroll){var a=(o.touches?o.touches[0]:o).clientX,l=(o.touches?o.touches[0]:o).clientY,s=e.scrollSensitivity,r=e.scrollSpeed,i=Ee(),d=!1,_;Bt!==n&&(Bt=n,vt(),Ze=e.scroll,_=e.scrollFn,Ze===!0&&(Ze=Ne(n,!0)));var f=0,h=Ze;do{var p=h,g=Z(p),E=g.top,S=g.bottom,V=g.left,B=g.right,U=g.width,N=g.height,se=void 0,oe=void 0,w=p.scrollWidth,L=p.scrollHeight,j=I(p),ue=p.scrollLeft,b=p.scrollTop;p===i?(se=U<w&&(j.overflowX==="auto"||j.overflowX==="scroll"||j.overflowX==="visible"),oe=N<L&&(j.overflowY==="auto"||j.overflowY==="scroll"||j.overflowY==="visible")):(se=U<w&&(j.overflowX==="auto"||j.overflowX==="scroll"),oe=N<L&&(j.overflowY==="auto"||j.overflowY==="scroll"));var $=se&&(Math.abs(B-a)<=s&&ue+U<w)-(Math.abs(V-a)<=s&&!!ue),T=oe&&(Math.abs(S-l)<=s&&b+N<L)-(Math.abs(E-l)<=s&&!!b);if(!Q[f])for(var F=0;F<=f;F++)Q[F]||(Q[F]={});(Q[f].vx!=$||Q[f].vy!=T||Q[f].el!==p)&&(Q[f].el=p,Q[f].vx=$,Q[f].vy=T,clearInterval(Q[f].pid),($!=0||T!=0)&&(d=!0,Q[f].pid=setInterval((function(){t&&this.layer===0&&A.active._onTouchMove(Et);var H=Q[this.layer].vy?Q[this.layer].vy*r:0,de=Q[this.layer].vx?Q[this.layer].vx*r:0;typeof _=="function"&&_.call(A.dragged.parentNode[he],de,H,o,Et,Q[this.layer].el)!=="continue"||bn(Q[this.layer].el,de,H)}).bind({layer:f}),24))),f++}while(e.bubbleScroll&&h!==i&&(h=Ne(h,!1)));Ht=d}},30),Dn=function(e){var n=e.originalEvent,t=e.putSortable,a=e.dragEl,l=e.activeSortable,s=e.dispatchSortableEvent,r=e.hideGhostForTarget,i=e.unhideGhostForTarget;if(n){var d=t||l;r();var _=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,f=document.elementFromPoint(_.clientX,_.clientY);i(),d&&!d.el.contains(f)&&(s("spill"),this.onSpill({dragEl:a,putSortable:t}))}};function qt(){}qt.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,t=e.putSortable;this.sortable.captureAnimationState(),t&&t.captureAnimationState();var a=Je(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(n,a):this.sortable.el.appendChild(n),this.sortable.animateAll(),t&&t.animateAll()},drop:Dn};Te(qt,{pluginName:"revertOnSpill"});function Gt(){}Gt.prototype={onSpill:function(e){var n=e.dragEl,t=e.putSortable,a=t||this.sortable;a.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),a.animateAll()},drop:Dn};Te(Gt,{pluginName:"removeOnSpill"});A.mount(new xo);A.mount(Gt,qt);const Do=o=>(Ln("data-v-45f4eceb"),o=o(),Rn(),o),To={key:0,class:"flex justify-between tags-container",ref:"containerDom"},Oo=["onContextmenu","onClick"],Io={key:0,class:"ma-tag-prev"},Ao={key:1,class:"ma-tag-next"},Mo=Do(()=>C("span",{class:"ma-tags-more"},[C("span",{class:"ma-tags-more-icon"},[C("i",{class:"ma-box ma-box-t"}),C("i",{class:"ma-box ma-box-b"})])],-1)),Po={class:"ma-tags-more-contextmenu"},No={__name:"ma-tags",setup(o){const e=Oe(),n=ye(),t=ne(),a=st(),l=P(null),s=P(!1),r=P(!1),i=P(null),d=P(0),_=P(0),f=["login"];ce(()=>t.tag,b=>{He(()=>{(l.value.scrollWidth??!1)&&l.value.offsetWidth&&(s.value=l.value.scrollWidth>l.value.offsetWidth)})},{deep:!0}),ce(()=>a.tags,b=>{He(()=>{(l.value.scrollWidth??!1)&&l.value.offsetWidth&&(s.value=l.value.scrollWidth>l.value.offsetWidth)})},{deep:!0}),ce(()=>e,b=>{f.includes(b.name)||Nn({name:b.name,path:b.fullPath,affix:b.meta.affix,title:b.meta.title}),He(()=>{l.value&&l.value.scrollWidth>l.value.clientWidth&&l.value.querySelector(".active").scrollIntoView()})},{deep:!0}),ce(r,b=>{const $=T=>{const F=document.querySelector(".tags-contextmenu");F&&!F.contains(T.target)&&g()};b?document.body.addEventListener("click",T=>$(T)):document.body.removeEventListener("click",T=>$(T))});const h=b=>{n.push({path:b.path,query:Ye.getRequestParams(b.path)})},p=(b,$)=>{i.value=$,r.value=!0,d.value=b.clientX+1,_.value=b.clientY+1,He(()=>{const T=document.querySelector(".tags-contextmenu");document.body.offsetWidth-b.clientX<T.offsetWidth&&(d.value=document.body.offsetWidth-T.offsetWidth+1,_.value=b.clientY+1)})},g=()=>{i.value=null,r.value=!1},E=()=>{const b=i.value;r.value=!1,e.fullPath!=b.fullPath&&n.push({path:b.path,query:Ye.getRequestParams(b.path)}),document.getElementById("app").classList.add("max-size")},S=()=>{const b=i.value;r.value=!1,e.fullPath!=b.fullPath&&n.push({path:b.path,query:Ye.getRequestParams(b.path)}),Zt()},V=()=>{Zt()},B=()=>{[...a.tags].forEach($=>{($.affix||e.path==$.path)&&Re($)})},U=()=>{i.value.affix||(Re(i.value),r.value=!1)},N=()=>{const b=i.value;e.path!=b.path&&n.push({path:b.path});const $=[...a.tags];let T=null;$.forEach((F,H)=>{b.path==F.path&&(T=H)}),$.forEach((F,H)=>{if(F.affix||b.path==F.path)return!0;H>T&&Re(F)}),r.value=!1},se=()=>{const b=i.value;e.path!=b.path&&n.push({path:b.path});const $=[...a.tags];let T=null;$.forEach((F,H)=>{b.path==F.path&&(T=H)}),$.forEach((F,H)=>{if(F.affix||b.path==F.path)return!0;H<T&&Re(F)}),r.value=!1},oe=()=>{[...a.tags].forEach($=>{if($.affix||e.path==$.path)return!0;Re($)}),r.value=!1},w=()=>{const b=i.value;e.path!=b.path&&n.push({path:b.path}),[...a.tags].forEach(T=>{if(T.affix||b.path==T.path)return!0;Re(T)}),r.value=!1},L=b=>{const $=b.wheelDelta||b.detail,T=1,F=-1;let H=0;$==3||$<0&&$!=-3?H=T*50:H=F*50,l.value.scrollLeft+=H},j=b=>{const $=l.value.scrollLeft,T=$+b,F=b/50;ue($,T,F)},ue=(b,$,T)=>{T>0?b<$?(b+=T,l.value.scrollLeft=b,window.requestAnimationFrame(()=>{ue(b,$,T)})):l.value.scrollLeft=$:b>$?(b+=T,l.value.scrollLeft=b,window.requestAnimationFrame(()=>{ue(b,$,T)})):l.value.scrollLeft=$};return ve(()=>{l.value&&(A.create(l.value,{draggable:"a",animation:300}),l.value.addEventListener("mousewheel",L,{passive:!0})||l.value.addEventListener("DOMMouseScroll",L,{passive:!0}),He(()=>{s.value=l.value.scrollWidth>l.value.offsetWidth}))}),(b,$)=>{const T=m("icon-close"),F=m("IconLeft"),H=m("IconRight"),de=m("icon-refresh"),ke=m("a-divider"),we=m("icon-close-circle"),X=m("icon-close-circle-fill"),Jt=m("a-trigger"),ct=m("icon-fullscreen"),Dt=m("icon-arrow-right"),On=m("icon-arrow-left");return k(t).tag?(v(),R("div",To,[C("div",{class:te(["menu-tags-wrapper",{"tag-pn":s.value}]),ref:"scrollbarDom"},[C("div",{class:"tags",ref_key:"tags",ref:l},[(v(!0),R(J,null,be(k(a).tags,ie=>(v(),R("a",{key:ie.path,onContextmenu:Qt(Tt=>p(Tt,ie),["prevent"]),class:te(k(e).fullPath==ie.path?"active":""),onClick:Tt=>h(ie)},[O(x(ie.customTitle?ie.customTitle:k(t).i18n?b.$t("menus."+ie.name).indexOf(".")>0?ie.title:b.$t("menus."+ie.name):ie.title)+" ",1),ie.affix?G("",!0):(v(),D(T,{key:0,class:"tag-icon",onClick:Qt(Tt=>k(Re)(ie),["stop"])},null,8,["onClick"]))],42,Oo))),128))],512),s.value?(v(),R("span",Io,[c(F,{size:20,class:"tag-scroll-icon",onClick:$[0]||($[0]=ie=>j(-500))})])):G("",!0),s.value?(v(),R("span",Ao,[c(H,{size:20,class:"tag-scroll-icon",onClick:$[1]||($[1]=ie=>j(500))})])):G("",!0)],2),c(Jt,{class:"ma-tags-more-dropdown","popup-translate":[-65,-6],"show-arrow":!0,trigger:"hover"},{content:u(()=>[C("ul",Po,[C("li",{onClick:V},[c(de),O(" "+x(b.$t("sys.tags.refresh")),1)]),c(ke,{class:"dropdown-divider"}),C("li",{onClick:B},[c(we),O(" "+x(b.$t("sys.tags.closeTag")),1)]),C("li",{onClick:oe},[c(X),O(" "+x(b.$t("sys.tags.closeOtherTag")),1)])])]),default:u(()=>[Mo]),_:1}),r.value?(v(),R("ul",{key:0,class:"tags-contextmenu",style:$e({left:d.value+"px",top:_.value+"px"})},[C("li",{onClick:S},[c(de),O(" "+x(b.$t("sys.tags.refresh")),1)]),C("li",{onClick:E},[c(ct),O(" "+x(b.$t("sys.tags.fullscreen")),1)]),c(ke),C("li",{onClick:N},[c(Dt),O(" "+x(b.$t("sys.tags.closeRightTag")),1)]),C("li",{onClick:se},[c(On),O(" "+x(b.$t("sys.tags.closeLeftTag")),1)]),C("li",{onClick:U,class:te(i.value.affix?"disabled":"")},[c(we),O(" "+x(b.$t("sys.tags.closeTag")),1)],2),C("li",{onClick:w},[c(X),O(" "+x(b.$t("sys.tags.closeOtherTag")),1)])],4)):G("",!0)],512)):G("",!0)}}},$t=Le(No,[["__scopeId","data-v-45f4eceb"]]),Lo={class:"flex justify-between",style:{height:"50px"}},Ro=["src"],Fo={__name:"ma-columns-header",setup(o){return(e,n)=>{const t=m("a-avatar"),a=m("a-layout-header");return v(),D(a,{class:"layout-header flex flex-col operation-area"},{default:u(()=>[C("div",Lo,[c(t,{class:"mt-1 ml-2 inline lg:hidden",style:{width:"45px"},size:40},{default:u(()=>[C("img",{src:`${e.$url}logo.svg`,class:"bg-white"},null,8,Ro)]),_:1}),c(hn),c(Ct)]),c($t,{class:"hidden lg:flex"})]),_:1})}}},Tn={__name:"children-menu",props:{modelValue:Array},emits:["go"],setup(o,{emit:e}){const n=ye(),t=ne(),a=st(),l=s=>{s.meta&&s.meta.type==="L"?window.open(s.path):s.path&&s.component?(n.push(s.path),a.addTag({name:s.name,title:s.meta.title,path:s.path})):console.warn("菜单未配置组件或者path")};return(s,r)=>{const i=m("a-menu-item"),d=m("children-menu",!0),_=m("a-sub-menu"),f=m("a-layout-content");return v(),D(f,{class:"sys-menus"},{default:u(()=>[(v(!0),R(J,null,be(o.modelValue,h=>(v(),R(J,{key:h.id},[h.meta.hidden?G("",!0):(v(),R(J,{key:0},[!h.children||h.children.length===0?(v(),D(i,{key:h.name,onClick:p=>l(h)},qe({default:u(()=>[O(" "+x(k(t).i18n?s.$t(`menus.${h.name}`).indexOf(".")>0?h.meta.title:s.$t(`menus.${h.name}`):h.meta.title),1)]),_:2},[h.meta.icon?{name:"icon",fn:u(()=>[(v(),D(De(h.meta.icon),{class:te(h.meta.icon.indexOf("ma")>0?"icon":"")},null,8,["class"]))]),key:"0"}:void 0]),1032,["onClick"])):(v(),D(_,{key:h.name},qe({title:u(()=>[O(x(k(t).i18n?s.$t(`menus.${h.name}`).indexOf(".")>0?h.meta.title:s.$t(`menus.${h.name}`):h.meta.title),1)]),default:u(()=>[h.children?(v(),D(d,{key:0,modelValue:h.children,"onUpdate:modelValue":p=>h.children=p},null,8,["modelValue","onUpdate:modelValue"])):G("",!0)]),_:2},[h.meta.icon?{name:"icon",fn:u(()=>[(v(),D(De(h.meta.icon),{class:te(h.meta.icon.indexOf("ma")>0?"icon":"")},null,8,["class"]))]),key:"0"}:void 0]),1024))],64))],64))),128))]),_:1})}}},Vo={__name:"ma-menu",props:{height:{type:String,default:"100%"}},setup(o,{expose:e}){ye();const n=Oe(),{t}=Xt.useI18n(),a=ne();Ie();const l=P([]),s=P([]),r=P([]),i=P("");ve(()=>{s.value=[n.name],_()}),ce(()=>n,p=>{s.value=[p.name],_()},{deep:!0});const d=p=>{p.children&&p.children.length>0&&(l.value=p.children,a.i18n?i.value=t("menus."+p.name).indexOf(".")>0?p.meta.title:t("menus."+p.name):i.value=p.meta.title)},_=()=>{n.matched[1]&&n.matched[1].meta&&!n.matched[1].meta.breadcrumb?(r.value=[],n.matched.map((p,g)=>{n.matched[0].name==="layout"&&r.value.push("home")})):(r.value=[],n.matched[1]&&n.matched[1].meta&&n.matched[1].meta.breadcrumb.map(p=>{r.value.push(p.name)}))},f=p=>{a.toggleMenu(p)},h=o;return e({loadChildMenu:d,title:i,actives:s,menus:l,openKeys:r,findTopMenuName:_}),(p,g)=>{const E=m("a-menu");return v(),D(E,{class:"ma-menu",style:$e({width:k(a).menuWidth+"px",height:h.height}),breakpoint:"md","open-keys":r.value,"onUpdate:openKeys":g[1]||(g[1]=S=>r.value=S),"selected-keys":s.value,"onUpdate:selectedKeys":g[2]||(g[2]=S=>s.value=S),accordion:!0,"collapsed-width":45,"show-collapse-button":"",collapsed:k(a).menuCollapse,onCollapse:f,"popup-max-height":360,"auto-scroll-into-view":""},{default:u(()=>[c(Tn,{modelValue:l.value,"onUpdate:modelValue":g[0]||(g[0]=S=>l.value=S)},null,8,["modelValue"])]),_:1},8,["style","open-keys","selected-keys","collapsed"])}}},Kt=Le(Vo,[["__scopeId","data-v-8183b6ad"]]),Wo={class:"sider customer-scrollbar flex flex-col items-center bg-gray-800 dark:border-blackgray-5"},zo=["src"],Bo={class:"mt-1 parent-menu-container"},Ho=["onClick"],jo={class:"layout-menu shadow flex flex-col"},Xo={__name:"ma-columns-menu",setup(o){const e=Oe(),n=ye(),t=P(null),a=ne(),l=Ie(),s=Yt(),r=P(!1),i=P(""),d=P("flex flex-col parent-menu items-center rounded mt-1 text-gray-200 hover:bg-gray-700 dark:hover:text-gray-50 dark:hover:bg-blackgray-1");ve(()=>{s.menuLoader=!0,_(!0)}),ce(()=>e,h=>{s.menuLoader=!1,_(!1)},{deep:!0});const _=(h=!0)=>{var g,E;let p;(E=(g=e.matched[1])==null?void 0:g.meta)!=null&&E.breadcrumb?p=e.matched[1].meta.breadcrumb[0].name:p="home",console.log(p),l.routers&&l.routers.length>0&&l.routers.map((S,V)=>{S.name==p&&f(S,V,h)})},f=(h,p,g=!0)=>{var E;if(h.meta.type==="L"){window.open(h.path);return}h.children.length>0?(h.redirect&&g&&!s.menuLoader&&n.push(h.redirect),t.value.loadChildMenu(h),r.value=!0):(r.value=!1,n.push(h.path)),i.value=(E=t.value)==null?void 0:E.title,document.querySelectorAll(".parent-menu").forEach((S,V)=>{p!==V?S.classList.remove("active"):S.classList.add("active")})};return(h,p)=>{const g=m("a-avatar"),E=m("a-layout-sider");return v(),R(J,null,[C("div",Wo,[c(g,{class:"mt-2",size:40},{default:u(()=>[C("img",{src:`${h.$url}logo.svg`,class:"bg-white"},null,8,zo)]),_:1}),C("ul",Bo,[(v(!0),R(J,null,be(k(l).routers,(S,V)=>(v(),R("li",{key:V,class:te(`${d.value}`),onClick:()=>{k(s).menuLoader=!1,f(S,V)}},[S.meta.icon?(v(),D(De(S.meta.icon),{key:0,class:"text-xl mt-1"})):G("",!0),C("span",{class:"mt-0.5",style:$e(k(a).language==="en"?"font-size: 10px":"")},x(k(a).i18n?h.$t(`menus.${S.name}`).indexOf(".")>0?S.meta.title:h.$t(`menus.${S.name}`):S.meta.title),5)],10,Ho))),128))])]),Ge(C("div",jo,[Ge(C("div",{class:"menu-title flex items-center"},x(i.value),513),[[Ke,!k(a).menuCollapse]]),c(E,{style:$e(`width: ${k(a).menuCollapse?"50px":k(a).menuWidth+"px"};
        height: ${k(a).menuCollapse?"100%":"calc(100% - 51px)"};`)},{default:u(()=>[c(Kt,{ref_key:"MaMenuRef",ref:t,class:te(k(a).menuCollapse?"ml-0.5":"")},null,8,["class"])]),_:1},8,["style"])],512),[[Ke,r.value]])],64)}}},Yo={class:"w-full h-full"},Uo=["src"],qo={__name:"iframe-view",setup(o){const e=Fn(),n=Oe();ce(()=>n,a=>{t(a)},{deep:!0});const t=a=>{a.meta.type==="I"&&e.addIframe(a)};return t(n),(a,l)=>Ge((v(),R("div",Yo,[(v(!0),R(J,null,be(k(e).iframes,s=>Ge((v(),R("iframe",{src:s.meta.url,key:s.name,frameborder:"0",class:"w-full h-full"},null,8,Uo)),[[Ke,s.meta.url===a.$route.meta.url]])),128))],512)),[[Ke,a.$route.meta.type==="I"]])}},xt={__name:"ma-workerArea",setup(o){const e=ne(),n=Yt();return(t,a)=>{const l=m("router-view"),s=m("a-layout-content");return v(),D(s,{class:"work-area customer-scrollbar relative"},{default:u(()=>[C("div",{class:te(["h-full",{"p-3":t.$route.path.indexOf("maIframe")===-1}])},[c(l,null,{default:u(({Component:r})=>[c(fn,{name:k(e).animation,mode:"out-in"},{default:u(()=>[(v(),D(Vn,{include:k(n).keepAlives},[k(n).show?(v(),D(De(r),{key:t.$route.fullPath})):G("",!0)],1032,["include"]))]),_:2},1032,["name"])]),_:1}),c(qo)],2)]),_:1})}}},Go={id:"layout-columns-left-panel",class:"ma-ui-menu layout-columns-left-panel hidden lg:flex justify-between"},Ko={__name:"index",setup(o){const e=P(0);return ve(()=>{const n=document.getElementById("layout-columns-left-panel");new pn(a=>{for(const l of a)switch(l.target){case n:e.value=l.contentRect.width;break}}).observe(n)}),(n,t)=>{const a=m("a-layout-content");return v(),D(a,{class:"layout flex justify-between"},{default:u(()=>[C("div",Go,[c(Xo)]),C("div",{class:"layout-columns-right-panel flex flex-col",style:$e(`width: calc(100% - ${e.value}px)`)},[c(Fo,{class:"ma-ui-header"}),c(xt)],4)]),_:1})}}},Jo={class:"flex justify-center logo"},Qo=["src"],Zo={key:0,class:"ml-2 text-xl mt-2.5"},ea={__name:"ma-classic-slider",setup(o){const e=P(null),n=Ie(),t=ne();return ve(()=>{setTimeout(a=>{e.value.menus=n.routers},50)}),(a,l)=>{const s=m("a-avatar"),r=m("a-layout-sider");return v(),D(r,{class:"layout-classic-sider h-full flex flex-col hidden lg:block",style:$e(`width: ${k(t).menuCollapse?"48px":k(t).menuWidth+"px"};`)},{default:u(()=>[C("div",Jo,[c(s,{class:"mt-1",size:40,shape:"square"},{default:u(()=>[C("img",{src:`${a.$url}logo.svg`,class:"bg-white"},null,8,Qo)]),_:1}),k(t).menuCollapse?G("",!0):(v(),R("span",Zo,x(a.$title),1))]),c(Kt,{ref_key:"MaMenuRef",ref:e,height:"calc(100% - 51px)",class:te(`${k(t).menuCollapse?"ml-1.5":""};`)},null,8,["class"])]),_:1},8,["style"])}}},ta={class:"flex justify-between layout-classic-header-container"},na=["src"],oa={__name:"ma-classic-header",setup(o){return(e,n)=>{const t=m("a-avatar"),a=m("a-layout-header");return v(),D(a,{class:"layout-classic-header flex flex-col operation-area"},{default:u(()=>[C("div",ta,[c(t,{class:"mt-1 ml-2 inline lg:hidden",style:{width:"45px"},size:40},{default:u(()=>[C("img",{src:`${e.$url}logo.svg`,class:"bg-white"},null,8,na)]),_:1}),c(hn),c(Ct)]),c($t,{class:"hidden lg:flex"})]),_:1})}}},aa={__name:"index",setup(o){return(e,n)=>{const t=m("a-layout-content"),a=m("a-layout");return v(),D(a,{class:"layout flex justify-between h-full"},{default:u(()=>[c(ea,{class:"ma-ui-slider"}),c(t,{class:"flex flex-col"},{default:u(()=>[c(oa,{class:"ma-ui-header"}),c(xt)]),_:1})]),_:1})}}},la={__name:"sub-menu",props:{menuInfo:Object},emits:["go"],setup(o,{emit:e}){const n=ye(),t=st(),a=ne(),l=s=>{s.meta&&s.meta.type==="L"?window.open(s.path):s.path&&s.component?(n.push(s.path),t.addTag({name:s.name,title:s.meta.title,path:s.path})):console.warn("菜单未配置组件或者path")};return(s,r)=>{const i=m("a-menu-item"),d=m("SubMenu",!0),_=m("a-sub-menu");return v(),D(_,{key:o.menuInfo.name},qe({title:u(()=>[O(x(k(a).i18n?s.$t(`menus.${o.menuInfo.name}`).indexOf(".")>0?o.menuInfo.meta.title:s.$t(`menus.${o.menuInfo.name}`):o.menuInfo.meta.title),1)]),default:u(()=>[(v(!0),R(J,null,be(o.menuInfo.children,f=>(v(),R(J,{key:f.id},[!f.children||f.children.length===0?(v(),D(i,{key:f.name,onClick:h=>l(f)},qe({default:u(()=>[O(" "+x(k(a).i18n?s.$t(`menus.${f.name}`).indexOf(".")>0?f.meta.title:s.$t(`menus.${f.name}`):f.meta.title),1)]),_:2},[f.meta.icon?{name:"icon",fn:u(()=>[(v(),D(De(f.meta.icon),{class:te(o.menuInfo.meta.icon.indexOf("ma")>0?"icon":"")},null,8,["class"]))]),key:"0"}:void 0]),1032,["onClick"])):(v(),D(d,{key:1,"menu-info":f},null,8,["menu-info"]))],64))),128))]),_:2},[o.menuInfo.meta.icon?{name:"icon",fn:u(()=>[(v(),D(De(o.menuInfo.meta.icon),{class:te(o.menuInfo.meta.icon.indexOf("ma")>0?"icon":"")},null,8,["class"]))]),key:"0"}:void 0]),1024)}}},sa=Le(la,[["__scopeId","data-v-7a72c9ca"]]),ia={__name:"children-banner",props:{modelValue:Array},emits:["go"],setup(o,{emit:e}){const n=ye(),t=ne(),a=st(),l=Oe(),s=P([]);ve(()=>{s.value=[l.name]}),ce(()=>l,i=>{s.value=[i.name]},{deep:!0});const r=i=>{i.meta&&i.meta.type==="L"?window.open(i.path):i.path&&i.component?(n.push(i.path),a.addTag({name:i.name,title:i.meta.title,path:i.path})):console.warn("菜单未配置组件或者path")};return(i,d)=>{const _=m("a-menu-item"),f=m("a-menu"),h=m("a-layout-content");return v(),D(h,{class:"sys-menus"},{default:u(()=>[c(f,{ref:"MaMenuRef",mode:"horizontal",class:"layout-banner-menu hidden lg:flex","popup-max-height":360,"selected-keys":s.value},{default:u(()=>[(v(!0),R(J,null,be(o.modelValue,p=>(v(),R(J,{key:p.id},[p.meta.hidden?G("",!0):(v(),R(J,{key:0},[!p.children||p.children.length===0?(v(),D(_,{key:p.name,onClick:g=>r(p)},qe({default:u(()=>[O(" "+x(k(t).i18n?i.$t(`menus.${p.name}`).indexOf(".")>0?p.meta.title:i.$t(`menus.${p.name}`):p.meta.title),1)]),_:2},[p.meta.icon?{name:"icon",fn:u(()=>[(v(),D(De(p.meta.icon),{class:te(p.meta.icon.indexOf("ma")>0?"icon":"")},null,8,["class"]))]),key:"0"}:void 0]),1032,["onClick"])):(v(),D(sa,{key:1,"menu-info":p},null,8,["menu-info"]))],64))],64))),128))]),_:1},8,["selected-keys"])]),_:1})}}},ra={class:"flex justify-between md:justify-center logo"},ca=["src"],ua={class:"ml-2 text-xl mt-2.5 hidden md:block"},da={class:"flex justify-between w-full layout-banner"},fa={__name:"index",setup(o){const e=Oe();P(null);const n=Ie();ne();const t=P([]);return ve(()=>{t.value=[e.name]}),ce(()=>e,a=>{t.value=[a.name]},{deep:!0}),(a,l)=>{const s=m("a-avatar"),r=m("a-layout-header"),i=m("a-layout");return v(),D(i,{class:"layout flex flex-col h-full"},{default:u(()=>[c(r,{class:"ma-ui-header flex justify-between h-50 layout-banner-header operation-area"},{default:u(()=>[C("div",ra,[c(s,{class:"mt-1 ml-2 md:ml-0",size:40},{default:u(()=>[C("img",{src:`${a.$url}logo.svg`,class:"bg-white"},null,8,ca)]),_:1}),C("span",ua,x(a.$title),1)]),C("div",da,[c(ia,{modelValue:k(n).routers,"onUpdate:modelValue":l[0]||(l[0]=d=>k(n).routers=d)},null,8,["modelValue"]),c(Ct)])]),_:1}),c($t,{class:"hidden lg:flex ma-ui-tags"}),c(xt)]),_:1})}}},pa=Le(fa,[["__scopeId","data-v-a06e416b"]]),ha={__name:"top-menu",props:{modelValue:Array,active:String},emits:["go"],setup(o,{expose:e,emit:n}){const t=o;ye();const a=n,l=ne();st(),Oe();const s=P([t.active??""]);ce(()=>t.active,d=>s.value=[d]);const r=d=>{s.value=[d.name],a("go",d)};return e({updateActive:d=>s.value=[d]}),(d,_)=>{const f=m("a-menu-item"),h=m("a-menu"),p=m("a-layout-content");return v(),D(p,{class:"sys-menus"},{default:u(()=>[c(h,{ref:"MaMenuRef",mode:"horizontal",class:"layout-banner-menu hidden lg:flex","popup-max-height":360,"selected-keys":s.value},{default:u(()=>[(v(!0),R(J,null,be(t.modelValue,g=>(v(),R(J,{key:g.id},[g.meta.hidden?G("",!0):(v(),D(f,{key:g.name,onClick:E=>r(g)},qe({default:u(()=>[O(" "+x(k(l).i18n?d.$t(`menus.${g.name}`).indexOf(".")>0?g.meta.title:d.$t(`menus.${g.name}`):g.meta.title),1)]),_:2},[g.meta.icon?{name:"icon",fn:u(()=>[(v(),D(De(g.meta.icon),{class:te(g.meta.icon.indexOf("ma")>0?"icon":"")},null,8,["class"]))]),key:"0"}:void 0]),1032,["onClick"]))],64))),128))]),_:1},8,["selected-keys"])]),_:1})}}},ma={class:"flex justify-between md:justify-center logo"},ga=["src"],_a={class:"ml-2 text-xl mt-2.5 hidden md:block"},va={class:"flex justify-between w-full layout-banner"},ya={__name:"index",setup(o){const e=Oe(),n=ye(),t=P(null),a=P(null),l=Ie(),s=ne(),r=Yt(),i=P(!1),d=P();ve(()=>{r.menuLoader=!0,_(!0)}),ce(()=>e,p=>{r.menuLoader=!1,_(!1)},{deep:!0});const _=(p=!0)=>{var g,E;(E=(g=e.matched[1])==null?void 0:g.meta)!=null&&E.breadcrumb?d.value=e.matched[1].meta.breadcrumb[0].name:d.value="home",l.routers&&l.routers.length>0&&l.routers.map((S,V)=>{S.name==d.value&&f(S,p)})},f=(p,g=!0)=>{if(p.meta.type==="L"){window.open(p.path);return}p.children.length>0?(p.redirect&&g&&!r.menuLoader&&n.push(p.redirect),a.value.loadChildMenu(p),i.value=!0):(i.value=!1,n.push(p.path)),t.value.updateActive(p.name)},h=P(0);return ve(()=>{const p=document.getElementById("layout-mixed-left-panel");new pn(E=>{for(const S of E)switch(S.target){case p:h.value=S.contentRect.width;break}}).observe(p)}),(p,g)=>{const E=m("a-avatar"),S=m("a-layout-header"),V=m("a-layout-sider"),B=m("a-layout");return v(),D(B,{class:"layout flex flex-col h-full"},{default:u(()=>[c(S,{class:"ma-ui-header flex justify-between h-50 layout-banner-header operation-area"},{default:u(()=>[C("div",ma,[c(E,{class:"mt-1 ml-2 md:ml-0",size:40},{default:u(()=>[C("img",{src:`${p.$url}logo.svg`,class:"bg-white"},null,8,ga)]),_:1}),C("span",_a,x(p.$title),1)]),C("div",va,[c(ha,{modelValue:k(l).routers,"onUpdate:modelValue":g[0]||(g[0]=U=>k(l).routers=U),active:d.value,onGo:g[1]||(g[1]=(U,N)=>{k(r).menuLoader=!1,f(U,N)}),ref_key:"topMenuRef",ref:t},null,8,["modelValue","active"]),c(Ct)])]),_:1}),C("div",{class:"flex",style:$e(`height:calc(100% - ${k(s).tag?"87px":"52px"}); `)},[Ge(c(V,{id:"layout-mixed-left-panel",class:"layout-classic-sider h-full flex flex-col hidden lg:block",style:$e(`width: ${k(s).menuCollapse?"48px":k(s).menuWidth+"px"};`)},{default:u(()=>[c(Kt,{ref_key:"MaMenuRef",ref:a,height:"100%",class:te(`${k(s).menuCollapse?"ml-1.5":""};`)},null,8,["class"])]),_:1},8,["style"]),[[Ke,i.value]]),C("div",{class:"w-full",style:$e(`width: calc(100% - ${h.value}px)`)},[c($t,{class:"hidden lg:flex ma-ui-tags"}),c(xt)],4)],4)]),_:1})}}},ba=Le(ya,[["__scopeId","data-v-bfbb42f8"]]),jt=[{name:"mine",thumb:"skins-thumb/mine/thumb.jpg"},{name:"businessGray",thumb:"skins-thumb/businessGray/thumb.jpg"},{name:"city",thumb:"skins-thumb/city/thumb.jpg"}],wa={class:"flex flex-col"},Sa={class:"leading-6"},Ea={__name:"skin",setup(o,{expose:e}){const n=P(!1),t=ne(),a=()=>n.value=!0,l=()=>n.value=!1,s=i=>t.useSkin(i),r=Vt(jt);return e({open:a}),(i,d)=>{const _=m("a-col"),f=m("a-image"),h=m("a-button"),p=m("a-row"),g=m("a-card"),E=m("a-modal");return v(),D(E,{visible:n.value,"onUpdate:visible":d[0]||(d[0]=S=>n.value=S),width:"600px",onCancel:l,footer:!1},{title:u(()=>[O(x(i.$t("sys.changeSkin")),1)]),default:u(()=>[C("div",wa,[(v(!0),R(J,null,be(r,(S,V)=>(v(),D(g,{key:S.name,class:te(V===0?"":"mt-3"),"body-style":{width:"100%",display:"flex",justifyContent:"space-between",padding:"10px"}},{default:u(()=>[c(p,{class:"w-full flex items-center"},{default:u(()=>[c(_,{span:3,class:"flex flex-col text-center"},{default:u(()=>[C("div",Sa,x(i.$t(`skin.${S.name}`)),1)]),_:2},1024),c(_,{span:6,class:"flex flex-col text-center"},{default:u(()=>[c(f,{src:i.$url+S.thumb,class:"rounded border"},null,8,["src"])]),_:2},1024),c(_,{span:12,class:"flex items-center pl-3 pr-3"},{default:u(()=>[O(x(i.$t(`skin.${S.name}Desc`)),1)]),_:2},1024),c(_,{span:3,class:"flex items-center justify-end"},{default:u(()=>[c(h,{type:k(t).skin===S.name?"primary":"secondary",disabled:k(t).skin===S.name,onClick:B=>s(S.name)},{default:u(()=>[O(x(k(t).skin===S.name?i.$t("skin.activated"):i.$t("skin.use")),1)]),_:2},1032,["type","disabled","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"]))),128))])]),_:1},8,["visible"])}}},Ca={class:"title"},ka={class:"title"},$a={__name:"setting",setup(o,{expose:e}){const n=Ie(),t=ne(),{t:a}=Xt.useI18n(),l=P(null),s=P(!1);P(!1);const r=P(""),i=Vt({mode:t.mode==="dark",tag:t.tag,menuCollapse:t.menuCollapse,menuWidth:t.menuWidth,layout:t.layout,language:t.language,animation:t.animation,i18n:t.i18n,ws:t.ws}),d=Vt(["#165DFF","#F53F3F","#F77234","#F7BA1E","#00B42A","#14C9C9","#3491FA","#722ED1","#F5319D","#D91AD9","#34C759","#43a047","#7cb342","#c0ca33","#86909c","#6d4c41"]),_=w=>{t.changeColor(w.hex)};jt.map(w=>{w.name===t.skin&&(r.value=a("skin."+w.name))}),ce(()=>t.skin,w=>{jt.map(L=>{L.name===w&&(r.value=a("skin."+L.name))})});const f=()=>s.value=!0,h=()=>s.value=!1,p=w=>t.changeLayout(w),g=w=>t.toggleI18n(w),E=w=>t.toggleWs(w),S=w=>t.changeLanguage(w),V=w=>t.changeAnimation(w),B=w=>t.toggleMode(w?"dark":"light"),U=w=>t.toggleTag(w),N=w=>t.toggleMenu(w),se=w=>t.changeMenuWidth(w);ce(()=>t.menuCollapse,w=>i.menuCollapse=w);const oe=async w=>{const L={mode:t.mode,tag:t.tag,menuCollapse:t.menuCollapse,menuWidth:t.menuWidth,layout:t.layout,skin:t.skin,i18n:t.i18n,language:t.language,animation:t.animation,color:t.color,ws:t.ws};Bn.updateInfo({id:n.user.id,backend_setting:L}).then(j=>{j.success&&dn.success(j.message)}),w(!0)};return e({open:f}),(w,L)=>{const j=m("a-divider"),ue=m("a-row"),b=m("a-button"),$=m("a-form-item"),T=m("a-option"),F=m("a-select"),H=m("a-switch"),de=m("a-input-number"),ke=m("a-form"),we=m("a-drawer");return v(),R(J,null,[c(we,{class:"backend-setting",visible:s.value,"onUpdate:visible":L[10]||(L[10]=X=>s.value=X),"on-before-ok":oe,width:"350px","ok-text":w.$t("sys.saveToBackend"),onCancel:h,unmountOnClose:""},{title:u(()=>[O(x(w.$t("sys.backendSettingTitle")),1)]),default:u(()=>[c(ke,{model:i,"auto-label-width":!0},{default:u(()=>[c(ue,{class:"flex justify-center mb-5"},{default:u(()=>[c(j,{orientation:"center"},{default:u(()=>[C("span",Ca,x(w.$t("sys.systemPrimaryColor")),1)]),_:1}),c(k(Wn),{theme:"dark",color:k(t).color,"sucker-hide":!0,"colors-default":d,onChangeColor:_,style:{width:"218px"}},null,8,["color","colors-default"])]),_:1}),c(j,{orientation:"center"},{default:u(()=>[C("span",ka,x(w.$t("sys.personalizedConfig")),1)]),_:1}),c($,{label:w.$t("sys.skin"),help:w.$t("sys.skinHelp")},{default:u(()=>[O(x(r.value)+" ",1),c(b,{type:"primary",status:"success",size:"mini",class:"ml-2",onClick:L[0]||(L[0]=X=>l.value.open())},{default:u(()=>[O(x(w.$t("sys.changeSkin")),1)]),_:1})]),_:1},8,["label","help"]),c($,{label:w.$t("sys.layouts"),help:w.$t("sys.layoutsHelp")},{default:u(()=>[c(F,{modelValue:i.layout,"onUpdate:modelValue":L[1]||(L[1]=X=>i.layout=X),onChange:p},{default:u(()=>[c(T,{value:"classic"},{default:u(()=>[O(x(w.$t("sys.layout.classic")),1)]),_:1}),c(T,{value:"columns"},{default:u(()=>[O(x(w.$t("sys.layout.columns")),1)]),_:1}),c(T,{value:"banner"},{default:u(()=>[O(x(w.$t("sys.layout.banner")),1)]),_:1}),c(T,{value:"mixed"},{default:u(()=>[O(x(w.$t("sys.layout.mixed")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label","help"]),c($,{label:w.$t("sys.ws"),help:w.$t("sys.wsHelp")},{default:u(()=>[c(H,{modelValue:i.ws,"onUpdate:modelValue":L[2]||(L[2]=X=>i.ws=X),onChange:E},null,8,["modelValue"])]),_:1},8,["label","help"]),c($,{label:w.$t("sys.i18n"),help:w.$t("sys.i18nHelp")},{default:u(()=>[c(H,{modelValue:i.i18n,"onUpdate:modelValue":L[3]||(L[3]=X=>i.i18n=X),onChange:g},null,8,["modelValue"])]),_:1},8,["label","help"]),i.i18n?(v(),D($,{key:0,label:w.$t("sys.language"),help:w.$t("sys.languageHelp")},{default:u(()=>[c(F,{modelValue:i.language,"onUpdate:modelValue":L[4]||(L[4]=X=>i.language=X),onChange:S},{default:u(()=>[c(T,{value:"zh_CN"},{default:u(()=>[O(x(w.$t("sys.chinese")),1)]),_:1}),c(T,{value:"en"},{default:u(()=>[O(x(w.$t("sys.english")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label","help"])):G("",!0),c($,{label:w.$t("sys.animation"),help:w.$t("sys.animationHelp")},{default:u(()=>[c(F,{modelValue:i.animation,"onUpdate:modelValue":L[5]||(L[5]=X=>i.animation=X),onChange:V},{default:u(()=>[c(T,{value:"ma-fade"},{default:u(()=>[O(x(w.$t("sys.animate.fade")),1)]),_:1}),c(T,{value:"ma-slide-left"},{default:u(()=>[O(x(w.$t("sys.animate.sliderLeft")),1)]),_:1}),c(T,{value:"ma-slide-right"},{default:u(()=>[O(x(w.$t("sys.animate.sliderRight")),1)]),_:1}),c(T,{value:"ma-slide-down"},{default:u(()=>[O(x(w.$t("sys.animate.sliderDown")),1)]),_:1}),c(T,{value:"ma-slide-up"},{default:u(()=>[O(x(w.$t("sys.animate.sliderUp")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label","help"]),r.value==="Mine"?(v(),D($,{key:1,label:w.$t("sys.dark"),help:w.$t("sys.darkHelp")},{default:u(()=>[c(H,{modelValue:i.mode,"onUpdate:modelValue":L[6]||(L[6]=X=>i.mode=X),onChange:B},null,8,["modelValue"])]),_:1},8,["label","help"])):G("",!0),c($,{label:w.$t("sys.tag"),help:w.$t("sys.tagHelp")},{default:u(()=>[c(H,{modelValue:i.tag,"onUpdate:modelValue":L[7]||(L[7]=X=>i.tag=X),onChange:U},null,8,["modelValue"])]),_:1},8,["label","help"]),i.layout!=="banner"?(v(),D($,{key:2,label:w.$t("sys.menuFold"),help:w.$t("sys.menuFoldHelp")},{default:u(()=>[c(H,{modelValue:i.menuCollapse,"onUpdate:modelValue":L[8]||(L[8]=X=>i.menuCollapse=X),onChange:N},null,8,["modelValue"])]),_:1},8,["label","help"])):G("",!0),i.layout!=="banner"?(v(),D($,{key:3,label:w.$t("sys.menuWidth"),help:w.$t("sys.menuWidthHelp")},{default:u(()=>[c(de,{modelValue:i.menuWidth,"onUpdate:modelValue":L[9]||(L[9]=X=>i.menuWidth=X),mode:"button",onChange:se},null,8,["modelValue"])]),_:1},8,["label","help"])):G("",!0)]),_:1},8,["model"])]),_:1},8,["visible","ok-text"]),c(Ea,{ref_key:"skin",ref:l},null,512)],64)}}},xa={class:"sys-search-container"},Da={class:"ssc-bg"},Ta={class:"w-6/12 mx-auto center-box"},Oa={class:"mt-10"},Ia=["src"],Aa={class:"mt-10"},Ma={class:"mt-5"},Pa={class:"mt-10 results shadow-lg customer-scrollbar"},Na=["onClick"],La={class:"icon-box flex justify-center items-center"},Ra={class:"ml-5 leading-6"},Fa={class:"title"},Va={class:"path"},Wa={__name:"search",setup(o){const e=ne(),n=ye(),t=P(),a=P(n.getRoutes()),l=r=>{a.value=n.getRoutes().filter(i=>!!(i.path&&i.path.indexOf(r)>-1||i.name&&i.name.indexOf(r)>-1||i.meta&&i.meta.title&&i.meta.title.indexOf(r)>-1))},s=r=>{e.searchOpen=!1,n.push(r.path)};return ve(()=>{t.value.focus(),document.addEventListener("keydown",r=>{const i=r.keyCode??r.which??r.charCode,d=document.querySelector(".active-search-li"),_=()=>{const p=document.querySelectorAll(".results li");let g={idx:0,path:"/"};return p.forEach((E,S)=>{if(E.className.split(" ").includes("active-search-li")){g.path=E.querySelector(".path").innerHTML,g.idx=S;return}}),g},f=p=>{document.querySelectorAll(".results li")[p].classList.add("active-search-li")},h=p=>{document.querySelectorAll(".results li")[p].classList.remove("active-search-li")};if(e.searchOpen){if(i===40)if(d){const p=document.querySelectorAll(".results li");let g=_(),E=g.idx+1;E>=p.length&&(E=0),h(g.idx),f(E)}else{f(0);return}if(i===38)if(d){const p=document.querySelectorAll(".results li");let g=_(),E=g.idx-1;E<0&&(E=p.length-1),h(g.idx),f(E)}else{f(document.querySelectorAll(".results li").length-1);return}if(i===13){const p=_();h(p.idx),p.path!=="/"&&s(p)}}He(()=>{const p=document.querySelector(".results");p&&p.scrollTop!==!1&&(p.scrollTop=(_().idx+1)*80-document.querySelectorAll(".results li").length*10)})})}),(r,i)=>{const d=m("icon-search"),_=m("a-input"),f=m("a-tag"),h=m("a-space"),p=m("icon-caret-up"),g=m("icon-caret-down"),E=m("icon-menu");return v(),R("div",xa,[C("div",Da,[C("div",Ta,[C("div",Oa,[C("img",{src:`${r.$url}logo.svg`,width:"100",class:"mx-auto"},null,8,Ia)]),C("div",Aa,[c(_,{size:"large",ref_key:"searchInputRef",ref:t,placeholder:"搜索页面，支持名称、标识以及URL的模糊查询",onInput:l},{prefix:u(()=>[c(d)]),_:1},512)]),C("div",Ma,[c(h,{size:"large",class:"flex justify-center"},{default:u(()=>[c(h,null,{default:u(()=>[c(f,null,{default:u(()=>[O("ALT+S")]),_:1}),c(f,null,{default:u(()=>[O("唤醒搜索面板")]),_:1})]),_:1}),c(h,null,{default:u(()=>[c(f,null,{default:u(()=>[c(p)]),_:1}),c(f,null,{default:u(()=>[c(g)]),_:1}),c(f,null,{default:u(()=>[O("切换搜索结果")]),_:1})]),_:1}),c(h,null,{default:u(()=>[c(f,null,{default:u(()=>[O("Enter")]),_:1}),c(f,null,{default:u(()=>[O("进入页面")]),_:1})]),_:1}),c(h,null,{default:u(()=>[c(f,null,{default:u(()=>[O("Esc")]),_:1}),c(f,null,{default:u(()=>[O("关闭搜索面板")]),_:1})]),_:1})]),_:1})]),C("ul",Pa,[(v(!0),R(J,null,be(a.value,S=>{var V;return v(),R(J,null,[S&&S.path.indexOf(":")===-1&&S.components&&((V=S==null?void 0:S.meta)==null?void 0:V.type)==="M"?(v(),R("li",{key:0,class:"flex items-center",onClick:B=>s(S)},[C("div",La,[S.meta.icon?(v(),D(De(S.meta.icon),{key:0,class:te(S.meta.icon.indexOf("ma")>0?"icon":"")},null,8,["class"])):(v(),D(E,{key:1}))]),C("div",Ra,[C("div",Fa,x(S.meta.title),1),C("div",Va,x(S.path),1)])],8,Na)):G("",!0)],64)}),256))])])])])}}},za=Le(Wa,[["__scopeId","data-v-c8f3fc52"]]),Ba={class:"block lg:hidden button-menu"},Ha={__name:"ma-buttonMenu",setup(o){const e=Ie(),n=P(!1);return(t,a)=>{const l=m("icon-close"),s=m("icon-menu"),r=m("a-menu"),i=m("a-trigger");return v(),R("div",Ba,[c(i,{trigger:["click"],clickToClose:"",position:"top",popupVisible:n.value,"onUpdate:popupVisible":a[1]||(a[1]=d=>n.value=d)},{content:u(()=>[c(r,{mode:"popButton",showCollapseButton:"","popup-max-height":360},{default:u(()=>[c(Tn,{modelValue:k(e).routers,"onUpdate:modelValue":a[0]||(a[0]=d=>k(e).routers=d)},null,8,["modelValue"])]),_:1})]),default:u(()=>[C("div",{class:te(`button-trigger ${n.value?"button-trigger-active":""}`)},[n.value?(v(),D(l,{key:0})):(v(),D(s,{key:1}))],2)]),_:1},8,["popupVisible"])])}}},qa={__name:"index",setup(o){const e=ne();Ie();const n=P(),t=P();ce(()=>e.settingOpen,l=>{l===!0&&(n.value.open(),e.settingOpen=!1)});const a=()=>{document.getElementById("app").classList.remove("max-size")};return ve(()=>{document.addEventListener("keydown",l=>{const s=l.keyCode??l.which??l.charCode;if((l.altKey??l.metaKey)&&s===83){e.searchOpen=!0;return}if(s===27){e.searchOpen=!1;return}})}),(l,s)=>{const r=m("icon-close"),i=m("a-layout-content");return v(),D(i,{class:"h-full main-container"},{default:u(()=>[k(e).layout==="columns"?(v(),D(Ko,{key:0})):G("",!0),k(e).layout==="classic"?(v(),D(aa,{key:1})):G("",!0),k(e).layout==="banner"?(v(),D(pa,{key:2})):G("",!0),k(e).layout==="mixed"?(v(),D(ba,{key:3})):G("",!0),c($a,{ref_key:"settingRef",ref:n},null,512),c(fn,{name:"ma-slide-down",mode:"out-in"},{default:u(()=>[Ge(c(za,{ref_key:"systemSearchRef",ref:t},null,512),[[Ke,k(e).searchOpen]])]),_:1}),c(Ha),C("div",{class:"max-size-exit",onClick:a},[c(r)])]),_:1})}}};export{qa as default};
