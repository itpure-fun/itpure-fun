import{m as p}from"./monitor-DMw_A0yA.js";import{_ as O,k as r,S as j,r as n,o as B,h as R,w as t,l as _,d as e,f as a,t as i,M as A,G as K,H as M,I as T}from"./index-Dj8CxrJe.js";const $=d=>(M("data-v-6c675b4f"),d=d(),T(),d),z={class:"ma-content-block lg:flex p-4"},D={class:"flex justify-between w-full redis-info mt-3"},F={class:"echarts hidden lg:block"},G={class:"ma-content-block p-4 mt-3"},H=$(()=>_("div",{class:"text-base"},"缓存数据管理",-1)),U={class:"mt-5 lg:flex justify-between"},q={name:"system:cache"},E=Object.assign(q,{setup(d){const f=r({}),s=r({}),v=r([]),m=r(""),b=j([{title:"缓存键名",dataIndex:"name"},{title:"操作",slotName:"operation",width:150,align:"right"}]),g=async l=>{const o=await p.view({key:l});m.value=o.data.content},y=async l=>{const o=await p.deleteKey({key:l.name});o.success&&(A.success(o.message),K())};return(async()=>{const l=await p.getCacheInfo();s.value=l.data.server,l.data.keys.map(o=>{v.value.push({name:o})}),f.value={tooltip:{formatter:"{b} : {c} kb"},series:[{name:"内存占用情况",type:"gauge",min:0,max:5*1024,progress:{show:!0},detail:{valueAnimation:!0,formatter:"{value}"},data:[{value:parseInt(l.data.server.use_memory),name:"Redis占用内存"}]}]}})(),(l,o)=>{const c=n("a-descriptions-item"),w=n("a-descriptions"),k=n("ma-chart"),h=n("a-link"),x=n("a-popconfirm"),I=n("a-space"),C=n("a-table"),V=n("a-textarea"),S=n("a-layout-content");return B(),R(S,null,{default:t(()=>[_("div",z,[_("div",D,[e(w,{column:2,size:"large",bordered:"",title:"Redis信息",class:"lg:w-10/12 w-full"},{default:t(()=>[e(c,{label:"Redis版本"},{default:t(()=>[a(i(s.value.version),1)]),_:1}),e(c,{label:"客户端连接数"},{default:t(()=>[a(i(s.value.clients),1)]),_:1}),e(c,{label:"运行模式"},{default:t(()=>[a(i(s.value.redis_mode),1)]),_:1}),e(c,{label:"运行天数"},{default:t(()=>[a(i(s.value.run_days),1)]),_:1}),e(c,{label:"端口"},{default:t(()=>[a(i(s.value.port),1)]),_:1}),e(c,{label:"AOF状态"},{default:t(()=>[a(i(s.value.aof_enabled),1)]),_:1}),e(c,{label:"已过期key"},{default:t(()=>[a(i(s.value.expired_keys),1)]),_:1}),e(c,{label:"系统使用key"},{default:t(()=>[a(i(s.value.sys_total_keys),1)]),_:1})]),_:1}),_("div",F,[e(k,{options:f.value,width:"330px",height:"330px"},null,8,["options"])])])]),_("div",G,[H,_("div",U,[e(C,{class:"lg:w-8/12 w-full",data:v.value,columns:b},{operation:t(({record:u})=>[e(I,null,{default:t(()=>[e(h,{onClick:N=>g(u.name)},{default:t(()=>[a("查看")]),_:2},1032,["onClick"]),e(x,{content:"确实要删除该缓存吗?",position:"bottom",onOk:N=>y(u)},{default:t(()=>[e(h,null,{default:t(()=>[a("删除")]),_:1})]),_:2},1032,["onOk"])]),_:2},1024)]),_:1},8,["data","columns"]),e(V,{modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=u=>m.value=u),class:"lg:w-4/12 w-full lg:ml-5 mt-3 lg:mt-0",readonly:""},null,8,["modelValue"])])])]),_:1})}}}),Q=O(E,[["__scopeId","data-v-6c675b4f"]]);export{Q as default};
