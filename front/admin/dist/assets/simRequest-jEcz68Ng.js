import{Z as G,k as f,S as N,x as L,r as n,o as M,c as A,d as e,w as a,f as _,l as h,M as H,X as J,ac as K}from"./index-Dj8CxrJe.js";const Q={class:"pl-2 pr-2"},R=h("div",{class:"mr-3 w-28"},"请求地址",-1),X={class:"pl-2 pr-2"},Z={class:"pl-2 pr-2"},z={class:"pl-2 pr-2"},I={__name:"simRequest",props:{row:Object},setup(O){var P,x;const k=G(),U=f(""),w=O,v=f("query"),S=f([{label:"所有模式",value:"A"},{label:"GET",value:"G"},{label:"POST",value:"P"},{label:"PUT",value:"U"},{label:"DELETE",value:"D"}]),r=N({header:[],query:[],body:[]}),g=()=>{r[v.value].push({name:"",value:""})},q=o=>{r[v.value].splice(o,1)},s=f({mode:(P=w.row)==null?void 0:P.request_mode,url:`/api/v1/${(x=w.row)==null?void 0:x.access_name}`}),B=async()=>{var b,y,p;if(s.value.url===""){H.info("请输入请求地址");return}let o;switch(s.value.mode){case"P":{o="POST";break}case"D":{o="DELETE";break}case"U":{o="PUT";break}default:o="GET"}let d={},V={},c={};r.header.map(u=>{d[u.name]=u.value}),r.query.map(u=>{V[u.name]=u.value}),r.body.map(u=>{c[u.name]=u.value});const C={header:Object.assign(d,(b=k.globalParams)==null?void 0:b.header),params:Object.assign(V,(y=k.globalParams)==null?void 0:y.query),data:Object.assign(c,(p=k.globalParams)==null?void 0:p.body),url:s.value.url,method:o},m=await J(C);U.value=K(m)};return L(()=>w.row,o=>{s.value.mode=o==null?void 0:o.request_mode,s.value.url=`/api/v1/${o==null?void 0:o.access_name}`}),(o,d)=>{const V=n("a-select"),c=n("a-input"),C=n("icon-send"),m=n("a-button"),b=n("a-input-group"),y=n("a-form"),p=n("icon-plus"),u=n("icon-delete"),i=n("a-table-column"),T=n("a-table"),E=n("a-tab-pane"),D=n("a-tabs"),$=n("a-divider"),j=n("ma-code-editor");return M(),A("div",Q,[e(y,{model:s.value},{default:a(()=>[e(b,null,{default:a(()=>[R,e(V,{options:S.value,style:{width:"130px"},modelValue:s.value.mode,"onUpdate:modelValue":d[0]||(d[0]=l=>s.value.mode=l)},null,8,["options","modelValue"]),e(c,{modelValue:s.value.url,"onUpdate:modelValue":d[1]||(d[1]=l=>s.value.url=l),placeholder:"请输入接口地址"},null,8,["modelValue"]),e(m,{type:"primary",onClick:B},{default:a(()=>[e(C),_(" 发送请求")]),_:1})]),_:1})]),_:1},8,["model"]),e(D,{"active-key":v.value,"onUpdate:activeKey":d[2]||(d[2]=l=>v.value=l),class:"mt-5"},{default:a(()=>[e(E,{key:"query",title:"设置Query"},{default:a(()=>[h("div",X,[e(m,{type:"primary",class:"mb-3",onClick:g},{default:a(()=>[e(p),_(" 新增")]),_:1}),e(T,{data:r.query,pagination:!1},{columns:a(()=>[e(i,{title:"#"},{cell:a(({rowIndex:l})=>[e(m,{type:"outline",onClick:t=>q(l)},{icon:a(()=>[e(u)]),_:2},1032,["onClick"])]),_:1}),e(i,{title:"键名",field:"name"},{cell:a(({record:l})=>[e(c,{modelValue:l.name,"onUpdate:modelValue":t=>l.name=t,"allow-clear":"",placeholder:"请输入键名"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{title:"值",field:"value"},{cell:a(({record:l})=>[e(c,{modelValue:l.value,"onUpdate:modelValue":t=>l.value=t,"allow-clear":"",placeholder:"请输入值"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"])])]),_:1}),e(E,{key:"body",title:"设置Body"},{default:a(()=>[h("div",Z,[e(m,{type:"primary",class:"mb-3",onClick:g},{default:a(()=>[e(p),_(" 新增")]),_:1}),e(T,{data:r.body,pagination:!1},{columns:a(()=>[e(i,{title:"#"},{cell:a(({rowIndex:l})=>[e(m,{type:"outline",onClick:t=>q(l)},{icon:a(()=>[e(u)]),_:2},1032,["onClick"])]),_:1}),e(i,{title:"键名",field:"name"},{cell:a(({record:l})=>[e(c,{modelValue:l.name,"onUpdate:modelValue":t=>l.name=t,"allow-clear":"",placeholder:"请输入键名"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{title:"值",field:"value"},{cell:a(({record:l})=>[e(c,{modelValue:l.value,"onUpdate:modelValue":t=>l.value=t,"allow-clear":"",placeholder:"请输入值"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"])])]),_:1}),e(E,{key:"header",title:"设置Header"},{default:a(()=>[h("div",z,[e(m,{type:"primary",class:"mb-3",onClick:g},{default:a(()=>[e(p),_(" 新增")]),_:1}),e(T,{data:r.header,pagination:!1},{columns:a(()=>[e(i,{title:"#"},{cell:a(({rowIndex:l})=>[e(m,{type:"outline",onClick:t=>q(l)},{icon:a(()=>[e(u)]),_:2},1032,["onClick"])]),_:1}),e(i,{title:"键名",field:"name"},{cell:a(({record:l})=>[e(c,{modelValue:l.name,"onUpdate:modelValue":t=>l.name=t,"allow-clear":"",placeholder:"请输入键名"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{title:"值",field:"value"},{cell:a(({record:l})=>[e(c,{modelValue:l.value,"onUpdate:modelValue":t=>l.value=t,"allow-clear":"",placeholder:"请输入值"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"])])]),_:1})]),_:1},8,["active-key"]),e($,{orientation:"left"},{default:a(()=>[_("服务器响应")]),_:1}),e(j,{modelValue:U.value,"onUpdate:modelValue":d[3]||(d[3]=l=>U.value=l),height:240,readonly:!0,isBind:!0},null,8,["modelValue"])])}}};export{I as default};
